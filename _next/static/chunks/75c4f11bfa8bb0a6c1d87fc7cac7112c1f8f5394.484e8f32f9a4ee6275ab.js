(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[4],{"1h5C":function(n,t,r){var e;!function(r){"use strict";var i={s:1,n:0,d:1};function u(n){function t(){var t=Error.apply(this,arguments);t.name=this.name=n,this.stack=t.stack,this.message=t.message}function r(){}return r.prototype=Error.prototype,t.prototype=new r,t}var a=l.DivisionByZero=u("DivisionByZero"),s=l.InvalidParameter=u("InvalidParameter");function o(n,t){return isNaN(n=parseInt(n,10))&&c(),n*t}function c(){throw new s}var f=function(n,t){var r,e=0,u=1,s=1,f=0,h=0,l=0,d=1,m=1,p=0,b=1,v=1,w=1,N=1e7;if(void 0===n||null===n);else if(void 0!==t)s=(e=n)*(u=t);else switch(typeof n){case"object":"d"in n&&"n"in n?(e=n.n,u=n.d,"s"in n&&(e*=n.s)):0 in n?(e=n[0],1 in n&&(u=n[1])):c(),s=e*u;break;case"number":if(n<0&&(s=n,n=-n),n%1===0)e=n;else if(n>0){for(n>=1&&(n/=m=Math.pow(10,Math.floor(1+Math.log(n)/Math.LN10)));b<=N&&w<=N;){if(n===(r=(p+v)/(b+w))){b+w<=N?(e=p+v,u=b+w):w>b?(e=v,u=w):(e=p,u=b);break}n>r?(p+=v,b+=w):(v+=p,w+=b),b>N?(e=v,u=w):(e=p,u=b)}e*=m}else(isNaN(n)||isNaN(t))&&(u=e=NaN);break;case"string":if(null===(b=n.match(/\d+|./g))&&c(),"-"===b[p]?(s=-1,p++):"+"===b[p]&&p++,b.length===p+1?h=o(b[p++],s):"."===b[p+1]||"."===b[p]?("."!==b[p]&&(f=o(b[p++],s)),(++p+1===b.length||"("===b[p+1]&&")"===b[p+3]||"'"===b[p+1]&&"'"===b[p+3])&&(h=o(b[p],s),d=Math.pow(10,b[p].length),p++),("("===b[p]&&")"===b[p+2]||"'"===b[p]&&"'"===b[p+2])&&(l=o(b[p+1],s),m=Math.pow(10,b[p+1].length)-1,p+=3)):"/"===b[p+1]||":"===b[p+1]?(h=o(b[p],s),d=o(b[p+2],1),p+=3):"/"===b[p+3]&&" "===b[p+1]&&(f=o(b[p],s),h=o(b[p+2],s),d=o(b[p+4],1),p+=5),b.length<=p){s=e=l+(u=d*m)*f+m*h;break}default:c()}if(0===u)throw new a;i.s=s<0?-1:1,i.n=Math.abs(e),i.d=Math.abs(u)};function h(n,t){if(!n)return t;if(!t)return n;for(;;){if(!(n%=t))return t;if(!(t%=n))return n}}function l(n,t){if(!(this instanceof l))return new l(n,t);f(n,t),n=l.REDUCE?h(i.d,i.n):1,this.s=i.s,this.n=i.n/n,this.d=i.d/n}l.REDUCE=1,l.prototype={s:1,n:0,d:1,abs:function(){return new l(this.n,this.d)},neg:function(){return new l(-this.s*this.n,this.d)},add:function(n,t){return f(n,t),new l(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(n,t){return f(n,t),new l(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(n,t){return f(n,t),new l(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(n,t){return f(n,t),new l(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return new l(this)},mod:function(n,t){return isNaN(this.n)||isNaN(this.d)?new l(NaN):void 0===n?new l(this.s*this.n%this.d,1):(f(n,t),0===i.n&&0===this.d&&l(0,0),new l(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d))},gcd:function(n,t){return f(n,t),new l(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(n,t){return f(n,t),0===i.n&&0===this.n?new l:new l(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.ceil(n*this.s*this.n/this.d),n)},floor:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.floor(n*this.s*this.n/this.d),n)},round:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.round(n*this.s*this.n/this.d),n)},inverse:function(){return new l(this.s*this.d,this.n)},pow:function(n){return n<0?new l(Math.pow(this.s*this.d,-n),Math.pow(this.n,-n)):new l(Math.pow(this.s*this.n,n),Math.pow(this.d,n))},equals:function(n,t){return f(n,t),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(n,t){f(n,t);var r=this.s*this.n*i.d-i.s*i.n*this.d;return(0<r)-(r<0)},simplify:function(n){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function r(n){return 1===n.length?new l(n[0]):r(n.slice(1)).inverse().add(n[0])}n=n||.001;for(var e=0;e<t.length;e++){var i=r(t.slice(0,e+1));if(i.sub(this.abs()).abs().valueOf()<n)return i.mul(this.s)}return this},divisible:function(n,t){return f(n,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(n){var t,r="",e=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=e:(n&&(t=Math.floor(e/i))>0&&(r+=t,r+=" ",e%=i),r+=e,r+="/",r+=i),r},toLatex:function(n){var t,r="",e=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=e:(n&&(t=Math.floor(e/i))>0&&(r+=t,e%=i),r+="\\frac{",r+=e,r+="}{",r+=i,r+="}"),r},toContinued:function(){var n,t=this.n,r=this.d,e=[];if(isNaN(t)||isNaN(r))return e;do{e.push(Math.floor(t/r)),n=t%r,t=r,r=n}while(1!==t);return e},toString:function(n){var t,r=this.n,e=this.d;if(isNaN(r)||isNaN(e))return"NaN";l.REDUCE||(r/=t=h(r,e),e/=t),n=n||15;var i=function(n,t){for(;t%2===0;t/=2);for(;t%5===0;t/=5);if(1===t)return 0;for(var r=10%t,e=1;1!==r;e++)if(r=10*r%t,e>2e3)return 0;return e}(0,e),u=function(n,t,r){for(var e=1,i=function(n,t,r){for(var e=1;t>0;n=n*n%r,t>>=1)1&t&&(e=e*n%r);return e}(10,r,t),u=0;u<300;u++){if(e===i)return u;e=10*e%t,i=10*i%t}return 0}(0,e,i),a=-1===this.s?"-":"";if(a+=r/e|0,r%=e,(r*=10)&&(a+="."),i){for(var s=u;s--;)a+=r/e|0,r%=e,r*=10;a+="(";for(s=i;s--;)a+=r/e|0,r%=e,r*=10;a+=")"}else for(s=n;r&&s--;)a+=r/e|0,r%=e,r*=10;return a}},void 0===(e=function(){return l}.apply(t,[]))||(n.exports=e)}()},BsWD:function(n,t,r){"use strict";r.d(t,"a",(function(){return i}));var e=r("a3WO");function i(n,t){if(n){if("string"===typeof n)return Object(e.a)(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(e.a)(n,t):void 0}}},"HaE+":function(n,t,r){"use strict";function e(n,t,r,e,i,u,a){try{var s=n[u](a),o=s.value}catch(c){return void r(c)}s.done?t(o):Promise.resolve(o).then(e,i)}function i(n){return function(){var t=this,r=arguments;return new Promise((function(i,u){var a=n.apply(t,r);function s(n){e(a,i,u,s,o,"next",n)}function o(n){e(a,i,u,s,o,"throw",n)}s(void 0)}))}}r.d(t,"a",(function(){return i}))},JePm:function(n,t,r){"use strict";var e=r("q1tI"),i=r.n(e),u=r("dWXJ"),a=r("kelf"),s=function(n,t){if(u.b&&n&&t){var r=new AudioBufferSourceNode(u.b);return r.buffer=t,r.connect(n),r.start(),!0}return!1};t.a=function(n){var t=n.chart,r=n.timeRef,e=(n.playing,n.enableBeatTick),o=i.a.useRef(0),c=i.a.useCallback((function(){if(t.beatTimeline[o.current]&&t.beatTimeline[o.current].time<=r.current)for(e&&s(u.c.suppressed,u.a.beat);t.beatTimeline[o.current]&&t.beatTimeline[o.current].time<=r.current;)o.current++}),[t,e]),f=i.a.useRef(0),h=i.a.useCallback((function(){if(t.arrowTimeline[f.current]&&t.arrowTimeline[f.current].time<=r.current){if(t.arrowTimeline[f.current].direction.match(/M/))s(u.c.suppressed,u.a.shock);else{var n=t.arrowTimeline[f.current].direction.match(/[12].*[12]/);s(u.c.normal,u.a.tick),n&&s(u.c.normal,u.a.tick)}for(;t.arrowTimeline[f.current]&&t.arrowTimeline[f.current].time<=r.current;)f.current++}}),[t]),l=i.a.useRef(t.bpmTimeline.findIndex((function(n){return r.current<n.time&&0===n.bpm}))),d=i.a.useCallback((function(){if(t.bpmTimeline[l.current]&&t.bpmTimeline[l.current].time<=r.current)for(s(u.c.suppressed,u.a.stop);t.bpmTimeline[l.current]&&(0!==t.bpmTimeline[l.current].bpm||t.bpmTimeline[l.current].time<=r.current);)l.current++}),[t]),m=i.a.useRef(0),p=i.a.useCallback((function(){r.current<m.current&&(o.current=t.beatTimeline.findIndex((function(n){return r.current<n.time})),f.current=t.arrowTimeline.findIndex((function(n){return r.current<n.time})),l.current=t.bpmTimeline.findIndex((function(n){return r.current<n.time&&0===n.bpm}))),m.current=r.current}),[t]);return Object(a.a)((function(){p(),c(),h(),d()}),[p,c,h,d]),null}},KQm4:function(n,t,r){"use strict";r.d(t,"a",(function(){return u}));var e=r("a3WO");var i=r("BsWD");function u(n){return function(n){if(Array.isArray(n))return Object(e.a)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||Object(i.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},ODXe:function(n,t,r){"use strict";r.d(t,"a",(function(){return i}));var e=r("BsWD");function i(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n)){var r=[],e=!0,i=!1,u=void 0;try{for(var a,s=n[Symbol.iterator]();!(e=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);e=!0);}catch(o){i=!0,u=o}finally{try{e||null==s.return||s.return()}finally{if(i)throw u}}return r}}(n,t)||Object(e.a)(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Zd8l:function(n,t,r){"use strict";r.d(t,"a",(function(){return c}));var e=r("ODXe"),i=r("q1tI"),u=r.n(i),a=r("kelf");r("rePB"),r("KQm4"),r("1h5C");var s=function(n){var t=0;return function(r){for(r<=0&&(t=0);t>0&&r<=n[t].offset;)t--;for(;n[t+1]&&r>n[t+1].offset;)t++;var e=function(n,t){return 4*n*60/t}(r-n[t].offset,n[t].bpm);return n[t].time+e}},o=function(n){var t=0;return function(r){for(r<=0&&(t=0);t>0&&r<=n[t].time;)t--;for(;n[t+1]&&r>n[t+1].time;)t++;var e=function(n,t){return n*t/60/4}(r-n[t].time,n[t].bpm);return n[t].offset+e}},c=function(n){var t=u.a.useRef(),r=u.a.useRef(),i=u.a.useState(!1),c=Object(e.a)(i,2),f=c[0],h=c[1],l=u.a.useRef(0),d=u.a.useRef(0),m=u.a.useMemo((function(){return n?[Math.floor(n.arrowTimeline[n.arrowTimeline.length-1].offset)+1,o(n.bpmTimeline),s(n.bpmTimeline)]:[0,null,null]}),[n]),p=Object(e.a)(m,3),b=p[0],v=p[1],w=p[2],N=u.a.useCallback((function(n){!f&&w&&(d.current=n,l.current=w(n))}),[f]),y=u.a.useCallback((function(n){!f&&v&&(l.current=n,d.current=v(n))}),[f]),k=u.a.useCallback((function(e){n&&(e||(l.current=0,d.current=0),t.current=l.current,r.current=(new Date).getTime(),h(!0))}),[n,h]),g=u.a.useCallback((function(){h(!1)}),[h]);return u.a.useEffect((function(){g(),l.current=0,d.current=0}),[n,g]),Object(a.a)((function(){if(f&&v&&r.current&&null!=t.current){var n=((new Date).getTime()-r.current)/1e3;l.current=n+t.current,d.current=v(l.current),d.current>=b&&g()}}),[f,v,g]),[d,l,f,k,g,y,N]}},a3WO:function(n,t,r){"use strict";function e(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}r.d(t,"a",(function(){return e}))},dWXJ:function(n,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return l}));var e=r("o0o1"),i=r.n(e),u=r("ODXe"),a=r("HaE+"),s=null,o={tick:null,stop:null,bpm:null,shock:null,beat:null},c={normal:null,suppressed:null},f=[["normal",1],["suppressed",.25]],h=[["tick","/stepcharts/cursor12.mp3"],["stop","/stepcharts/cursor4.mp3"],["bpm","/stepcharts/cancel1.mp3"],["shock","/stepcharts/cursor7.mp3"],["beat","/stepcharts/cursor6.mp3"]],l=function(){var n=Object(a.a)(i.a.mark((function n(){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=6;break}return t=new AudioContext,s=t,f.forEach((function(n){var r=Object(u.a)(n,2),e=r[0],i=r[1],a=new GainNode(t);a.gain.value=i,a.connect(t.destination),c[e]=a})),n.next=6,Promise.all(h.map(function(){var n=Object(a.a)(i.a.mark((function n(r){var e,a,s,c,f;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=Object(u.a)(r,2),a=e[0],s=e[1],n.next=3,fetch(s);case 3:return c=n.sent,n.next=6,c.arrayBuffer();case 6:return f=n.sent,n.next=9,t.decodeAudioData(f);case 9:o[a]=n.sent;case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()));case 6:return n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},kelf:function(n,t,r){"use strict";r.d(t,"a",(function(){return u}));var e=r("q1tI"),i=r.n(e),u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0,r=i.a.useRef(),e=i.a.useCallback(n,t);i.a.useEffect((function(){return r.current=requestAnimationFrame((function n(){r.current=requestAnimationFrame(n),e()})),function(){r.current&&cancelAnimationFrame(r.current)}}),[e])}},rePB:function(n,t,r){"use strict";function e(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}r.d(t,"a",(function(){return e}))}}]);