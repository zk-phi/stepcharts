_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{BsWD:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("a3WO");function o(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(e,t):void 0}}},"HaE+":function(e,t,r){"use strict";function n(e,t,r,n,o,c,a){try{var f=e[c](a),s=f.value}catch(u){return void r(u)}f.done?t(s):Promise.resolve(s).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,c){var a=e.apply(t,r);function f(e){n(a,o,c,f,s,"next",e)}function s(e){n(a,o,c,f,s,"throw",e)}f(void 0)}))}}r.d(t,"a",(function(){return o}))},KQm4:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("a3WO");var o=r("BsWD");function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"N+kb":function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSG",(function(){return j}));var n=r("q1tI"),o=r.n(n),c=r("ODXe"),a=r("KQm4"),f=o.a.createElement,s=13.5,u={4:"/stepcharts/arrow4.svg",6:"/stepcharts/arrow6.svg",8:"/stepcharts/arrow8.svg",12:"/stepcharts/arrow6.svg",16:"/stepcharts/arrow16.svg",shock:"/stepcharts/arrowShock.svg",freeze:"/stepcharts/arrowFreeze.svg"},i={0:"-90deg",1:"180deg",2:"0",3:"90deg"},d=function(e,t){return 4*e*16*t},p=function(e){var t=e.offset,r=e.speed,n={position:"absolute",top:"".concat(d(t,r),"vh"),width:1,height:1};return f("div",{style:n})},h=function(e){var t=e.beat,r=e.direction,n=e.offset,o=e.speed,c={position:"absolute",top:"".concat(d(n,o)-6.75,"vh"),left:"".concat(r*s,"vh"),height:"".concat(s,"vh"),width:"".concat(s,"vh"),background:"url(".concat(u[t],")"),backgroundSize:"cover",transform:"rotate(".concat(i[r],")")};return f("div",{style:c})},l=function(e){var t=e.direction,r=e.offset,n=e.endOffset,c=e.speed,a={position:"absolute",top:"".concat(d(r,c),"vh"),left:"".concat(t*s+.675,"vh"),height:"".concat(4*(n-r-.25)*c*16,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#5e5"},u={position:"absolute",top:"".concat(d(n-.25,c),"vh"),left:"".concat(t*s+.675,"vh"),height:"".concat(6.075,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#3b3"};return f(o.a.Fragment,null,f("div",{style:a}),f("div",{style:u}))},v=function(e){var t=e.offset,r=e.speed,n=e.color,o={position:"absolute",height:0,width:"".concat(54,"vh"),left:0,top:"".concat(d(t,r),"vh"),border:"2px solid ".concat(n)};return f("div",{style:o})},m=function(e){var t=e.chart,r=e.speed,n=void 0===r?1:r,c=Math.floor(t.arrows[t.arrows.length-1].offset),s=Object(a.a)(t.arrows).reverse(),u=Object(a.a)(t.freezes).reverse();return f(o.a.Fragment,null,Object(a.a)(Array(4*(c+1))).map((function(e,t){return f(v,{key:"b".concat(t),offset:t/4,speed:n,color:t%4===0?"#888":"#444"})})),t.bpm.map((function(e,t,r){return 0===t?null:r[t-1].bpm<e.bpm?f(v,{key:"ts".concat(t),offset:e.startOffset,speed:n,color:"#fc4"}):f(v,{key:"ts".concat(t),offset:e.startOffset,speed:n,color:"#4cf"})})),t.stops.map((function(e,t){return f(v,{key:"s".concat(t),offset:e.offset,speed:n,color:"#4f4"})})),u.map((function(e,t){return f(l,{key:"f".concat(t),direction:e.direction,offset:e.startOffset,endOffset:e.endOffset,speed:n})})),s.map((function(e,t){var r=e.direction.match(/2/)?"freeze":e.beat;return f(o.a.Fragment,null,e.direction.match(/^1.../)&&f(h,{key:"a".concat(t,"l"),beat:r,direction:0,offset:e.offset,speed:n}),e.direction.match(/^.1../)&&f(h,{key:"a".concat(t,"d"),beat:r,direction:1,offset:e.offset,speed:n}),e.direction.match(/^..1./)&&f(h,{key:"a".concat(t,"u"),beat:r,direction:2,offset:e.offset,speed:n}),e.direction.match(/^...1/)&&f(h,{key:"a".concat(t,"r"),beat:r,direction:3,offset:e.offset,speed:n}),e.direction.match(/^2.../)&&f(h,{key:"a".concat(t,"l"),beat:"freeze",direction:0,offset:e.offset,speed:n}),e.direction.match(/^.2../)&&f(h,{key:"a".concat(t,"d"),beat:"freeze",direction:1,offset:e.offset,speed:n}),e.direction.match(/^..2./)&&f(h,{key:"a".concat(t,"u"),beat:"freeze",direction:2,offset:e.offset,speed:n}),e.direction.match(/^...2/)&&f(h,{key:"a".concat(t,"r"),beat:"freeze",direction:3,offset:e.offset,speed:n}),e.direction.match(/^M.../)&&f(h,{key:"a".concat(t,"l"),beat:"shock",direction:0,offset:e.offset,speed:n}),e.direction.match(/^.M../)&&f(h,{key:"a".concat(t,"d"),beat:"shock",direction:1,offset:e.offset,speed:n}),e.direction.match(/^..M./)&&f(h,{key:"a".concat(t,"u"),beat:"shock",direction:2,offset:e.offset,speed:n}),e.direction.match(/^...M/)&&f(h,{key:"a".concat(t,"r"),beat:"shock",direction:3,offset:e.offset,speed:n}))})),f(p,{offset:c+2,speed:n}))},b=o.a.memo(m),y=function(e){var t=e.offset,r=void 0===t?0:t,n=e.speed,c=void 0===n?1:n,a=e.children,s=o.a.useRef(null),u={position:"relative",width:"".concat(54,"vh"),height:"100vh",backgroundColor:"black",overflow:"scroll"};return o.a.useEffect((function(){s.current&&(s.current.scrollTop=d(r,c)*window.innerHeight/100)}),[s,r,c]),f("div",{ref:s,style:u},a)},w=function(e){var t=e.chart,r=e.speed,n=void 0===r?1:r,o=e.offset;return f(y,{offset:void 0===o?0:o,speed:n},f(b,{chart:t,speed:n}))},k=r("pEhc"),g=r("Zd8l"),O=o.a.createElement,x=null,A=function(e){var t=e.chart,r=Object(g.a)(t),n=Object(c.a)(r,4),a=n[0],f=(n[1],n[2]),s=(n[3],o.a.useCallback((function(){x||(x=new AudioContext),f()}),[f]));return O("div",{style:{display:"flex"}},O(w,{chart:t,speed:2,offset:a}),O(k.a,{audioContext:x,chart:t,offset:a}),O("button",{onClick:s},"Play"))},E=o.a.createElement,j=!0;t.default=function(e){var t=e.chart;return E(A,{chart:t})}},ODXe:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("BsWD");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,c=void 0;try{for(var a,f=e[Symbol.iterator]();!(n=(a=f.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,c=s}finally{try{n||null==f.return||f.return()}finally{if(o)throw c}}return r}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Zd8l:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("ODXe"),o=r("q1tI"),c=r.n(o),a=r("KQm4"),f=function(e){var t=c.a.useRef(),r=c.a.useState(!1),o=Object(n.a)(r,2),f=o[0],s=o[1],u=c.a.useState(0),i=Object(n.a)(u,2),d=i[0],p=i[1],h=c.a.useRef(0),l=c.a.useMemo((function(){if(!e)return null;var t=function(e){var t=[].concat(Object(a.a)(e.bpm.map((function(e){return{offset:e.startOffset,bpm:e.bpm}}))),Object(a.a)(e.stops.map((function(e){return{offset:e.offset,stop:e.duration}})))).sort((function(e,t){return e.offset-t.offset})),r=[{time:0,offset:0,bpm:t.shift().bpm}];return t.forEach((function(e){var t=r[0].bpm,n=4*(e.offset-r[0].offset)/t*60,o=r[0].time+n;"bpm"in e?r.unshift({time:o,offset:e.offset,bpm:e.bpm}):(r.unshift({time:o,offset:e.offset,bpm:0}),r.unshift({time:o+e.stop,offset:e.offset,bpm:t}))})),r.reverse()}(e);return function(e){var r;for(r=h.current;t[r+1]&&t[r+1].time<e;r++);return h.current=r,(e-t[r].time)*t[r].bpm/60/4+t[r].offset}}),[e]),v=c.a.useCallback((function(){e&&(t.current=(new Date).getTime(),h.current=0,p(0),s(!0))}),[e,p,s]),m=c.a.useCallback((function(){s(!1)}),[p,s]);return c.a.useEffect((function(){m()}),[e,m]),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=c.a.useRef();c.a.useEffect((function(){return t.current=requestAnimationFrame((function r(){t.current=requestAnimationFrame(r),e()})),function(){t.current&&cancelAnimationFrame(t.current)}}),[e])}(c.a.useCallback((function(){f&&l&&t.current&&p(l(((new Date).getTime()-t.current)/1e3))}),[l,f,p])),[d,f,v,m]}},a3WO:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},o0o1:function(e,t,r){e.exports=r("ls82")},pEhc:function(e,t,r){"use strict";var n=r("o0o1"),o=r.n(n),c=r("HaE+"),a=r("q1tI"),f=r.n(a);t.a=function(e){var t=e.audioContext,r=e.chart,n=e.offset,a=f.a.useRef(),s=f.a.useRef(),u=f.a.useRef(),i=f.a.useRef(),d=f.a.useRef(),p=f.a.useRef();f.a.useEffect((function(){(function(){var e=Object(c.a)(o.a.mark((function e(){var r,n,c,f,h,l,v,m,b,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=49;break}return e.next=3,fetch("/stepcharts/cursor12.mp3");case 3:return r=e.sent,e.next=6,fetch("/stepcharts/cursor4.mp3");case 6:return n=e.sent,e.next=9,fetch("/stepcharts/cancel1.mp3");case 9:return c=e.sent,e.next=12,fetch("/stepcharts/cursor7.mp3");case 12:return f=e.sent,e.next=15,fetch("/stepcharts/cursor6.mp3");case 15:return h=e.sent,e.next=18,r.arrayBuffer();case 18:return l=e.sent,e.next=21,n.arrayBuffer();case 21:return v=e.sent,e.next=24,c.arrayBuffer();case 24:return m=e.sent,e.next=27,f.arrayBuffer();case 27:return b=e.sent,e.next=30,h.arrayBuffer();case 30:return y=e.sent,e.next=33,t.decodeAudioData(l);case 33:return a.current=e.sent,e.next=36,t.decodeAudioData(v);case 36:return s.current=e.sent,e.next=39,t.decodeAudioData(m);case 39:return u.current=e.sent,e.next=42,t.decodeAudioData(b);case 42:return i.current=e.sent,e.next=45,t.decodeAudioData(y);case 45:d.current=e.sent,p.current=new GainNode(t),p.current.gain.value=.25,p.current.connect(t.destination);case 49:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var h=f.a.useRef(0),l=f.a.useRef(Math.floor(r.arrows[r.arrows.length-1].offset)+1);f.a.useEffect((function(){if(t&&d.current&&p.current&&l.current&&h.current<=n&&n<=l.current){var e=new AudioBufferSourceNode(t);e.buffer=d.current,e.connect(p.current),e.start(),h.current=h.current+.25}}),[n]);var v=f.a.useRef(0);f.a.useEffect((function(){if(t&&a.current&&i.current&&r.arrows[v.current]&&r.arrows[v.current].offset<=n){var e,o=new AudioBufferSourceNode(t),c=r.arrows[v.current].direction.match(/M/),f=r.arrows[v.current].direction.match(/[12].*[12]/);if(o.buffer=c?i.current:a.current,o.connect(c&&p.current?p.current:t.destination),f){var s=new AudioBufferSourceNode(t);s.buffer=a.current,s.connect(t.destination),s.start()}for(o.start(),e=v.current+1;r.arrows[e]&&r.arrows[e].offset<=n;e++);v.current=e}}),[n]);var m=f.a.useRef(0);f.a.useEffect((function(){if(t&&s.current&&p.current&&r.stops[m.current]&&r.stops[m.current].offset<=n){var e,o=new AudioBufferSourceNode(t);for(o.buffer=s.current,o.connect(p.current),o.start(),e=m.current+1;r.stops[e]&&r.stops[e].offset<=n;e++);m.current=e}}),[n]);var b=f.a.useRef(0);return f.a.useEffect((function(){n<b.current&&(h.current=n-n%.25+.25,v.current=r.arrows.findIndex((function(e){return n<e.offset})),m.current=r.stops.findIndex((function(e){return n<e.offset}))),b.current=n}),[n,r]),null}},vnkr:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[mix]/[title]/[type]",function(){return r("N+kb")}])}},[["vnkr",0,2,1]]]);