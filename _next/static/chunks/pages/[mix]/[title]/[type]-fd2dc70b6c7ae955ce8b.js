_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{BsWD:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("a3WO");function o(t,e){if(t){if("string"===typeof t)return Object(n.a)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(t,e):void 0}}},"HaE+":function(t,e,r){"use strict";function n(t,e,r,n,o,c,a){try{var s=t[c](a),f=s.value}catch(u){return void r(u)}s.done?e(f):Promise.resolve(f).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,c){var a=t.apply(e,r);function s(t){n(a,o,c,s,f,"next",t)}function f(t){n(a,o,c,s,f,"throw",t)}s(void 0)}))}}r.d(e,"a",(function(){return o}))},KQm4:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("a3WO");var o=r("BsWD");function c(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"N+kb":function(t,e,r){"use strict";r.r(e),r.d(e,"__N_SSG",(function(){return N}));var n=r("q1tI"),o=r.n(n),c=r("o0o1"),a=r.n(c),s=r("HaE+"),f=r("ODXe"),u=r("KQm4"),i=o.a.createElement,d=13.5,p={4:"/stepcharts/arrow4.svg",6:"/stepcharts/arrow6.svg",8:"/stepcharts/arrow8.svg",12:"/stepcharts/arrow6.svg",16:"/stepcharts/arrow16.svg",shock:"/stepcharts/arrowShock.svg",freeze:"/stepcharts/arrowFreeze.svg"},l={0:"-90deg",1:"180deg",2:"0",3:"90deg"},h=function(t,e){return 4*t*16*e},b=function(t){var e=t.offset,r=t.speed,n={position:"absolute",top:"".concat(h(e,r),"vh"),width:1,height:1};return i("div",{style:n})},v=function(t){var e=t.beat,r=t.direction,n=t.offset,o=t.speed,c={position:"absolute",top:"".concat(h(n,o)-6.75,"vh"),left:"".concat(r*d,"vh"),height:"".concat(d,"vh"),width:"".concat(d,"vh"),background:"url(".concat(p[e],")"),backgroundSize:"cover",transform:"rotate(".concat(l[r],")")};return i("div",{style:c})},m=function(t){var e=t.direction,r=t.offset,n=t.endOffset,c=t.speed,a={position:"absolute",top:"".concat(h(r,c),"vh"),left:"".concat(e*d+.675,"vh"),height:"".concat(4*(n-r-.25)*c*16,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#5e5"},s={position:"absolute",top:"".concat(h(n-.25,c),"vh"),left:"".concat(e*d+.675,"vh"),height:"".concat(6.075,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#3b3"};return i(o.a.Fragment,null,i("div",{style:a}),i("div",{style:s}))},w=function(t){var e=t.offset,r=t.speed,n=t.color,o={position:"absolute",height:0,width:"".concat(54,"vh"),left:0,top:"".concat(h(e,r),"vh"),border:"2px solid ".concat(n)};return i("div",{style:o})},y=function(t){var e=t.chart,r=t.speed,n=void 0===r?1:r,c=Math.floor(e.arrows[e.arrows.length-1].offset),a=Object(u.a)(e.arrows).reverse(),s=Object(u.a)(e.freezes).reverse();return i(o.a.Fragment,null,Object(u.a)(Array(4*(c+1))).map((function(t,e){return i(w,{key:"b".concat(e),offset:e/4,speed:n,color:e%4===0?"#888":"#444"})})),e.bpm.map((function(t,e,r){return 0===e?null:r[e-1].bpm<t.bpm?i(w,{key:"ts".concat(e),offset:t.startOffset,speed:n,color:"#fc4"}):i(w,{key:"ts".concat(e),offset:t.startOffset,speed:n,color:"#4cf"})})),e.stops.map((function(t,e){return i(w,{key:"s".concat(e),offset:t.offset,speed:n,color:"#4f4"})})),s.map((function(t,e){return i(m,{key:"f".concat(e),direction:t.direction,offset:t.startOffset,endOffset:t.endOffset,speed:n})})),a.map((function(t,e){var r=t.direction.match(/2/)?"freeze":t.beat;return i(o.a.Fragment,null,t.direction.match(/^1.../)&&i(v,{key:"a".concat(e,"l"),beat:r,direction:0,offset:t.offset,speed:n}),t.direction.match(/^.1../)&&i(v,{key:"a".concat(e,"d"),beat:r,direction:1,offset:t.offset,speed:n}),t.direction.match(/^..1./)&&i(v,{key:"a".concat(e,"u"),beat:r,direction:2,offset:t.offset,speed:n}),t.direction.match(/^...1/)&&i(v,{key:"a".concat(e,"r"),beat:r,direction:3,offset:t.offset,speed:n}),t.direction.match(/^2.../)&&i(v,{key:"a".concat(e,"l"),beat:"freeze",direction:0,offset:t.offset,speed:n}),t.direction.match(/^.2../)&&i(v,{key:"a".concat(e,"d"),beat:"freeze",direction:1,offset:t.offset,speed:n}),t.direction.match(/^..2./)&&i(v,{key:"a".concat(e,"u"),beat:"freeze",direction:2,offset:t.offset,speed:n}),t.direction.match(/^...2/)&&i(v,{key:"a".concat(e,"r"),beat:"freeze",direction:3,offset:t.offset,speed:n}),t.direction.match(/^M.../)&&i(v,{key:"a".concat(e,"l"),beat:"shock",direction:0,offset:t.offset,speed:n}),t.direction.match(/^.M../)&&i(v,{key:"a".concat(e,"d"),beat:"shock",direction:1,offset:t.offset,speed:n}),t.direction.match(/^..M./)&&i(v,{key:"a".concat(e,"u"),beat:"shock",direction:2,offset:t.offset,speed:n}),t.direction.match(/^...M/)&&i(v,{key:"a".concat(e,"r"),beat:"shock",direction:3,offset:t.offset,speed:n}))})),i(b,{offset:c+2,speed:n}))},k=o.a.memo(y),O=function(t){var e=t.offset,r=void 0===e?0:e,n=t.speed,c=void 0===n?1:n,a=t.children,s=o.a.useRef(null),f={position:"relative",width:"".concat(54,"vh"),height:"100vh",backgroundColor:"black",overflow:"scroll"};return o.a.useEffect((function(){s.current&&(s.current.scrollTop=h(r,c)*window.innerHeight/100)}),[s,r,c]),i("div",{ref:s,style:f},a)},g=function(t){var e=t.chart,r=t.speed,n=void 0===r?1:r,o=t.offset;return i(O,{offset:void 0===o?0:o,speed:n},i(k,{chart:e,speed:n}))},j=r("pEhc"),E=r("Zd8l"),A=r("dWXJ"),S=o.a.createElement,x=function(t){var e=t.chart,r=Object(E.a)(e),n=Object(f.a)(r,4),c=n[0],u=(n[1],n[2]),i=(n[3],o.a.useCallback(Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.d)();case 2:u();case 3:case"end":return t.stop()}}),t)}))),[u]));return S("div",{style:{display:"flex"}},S(g,{chart:e,speed:2,offset:c}),S(j.a,{chart:e,offset:c}),S("button",{onClick:i},"Play"))},_=o.a.createElement,N=!0;e.default=function(t){var e=t.chart;return _(x,{chart:e})}},ODXe:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("BsWD");function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,c=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(f){o=!0,c=f}finally{try{n||null==s.return||s.return()}finally{if(o)throw c}}return r}}(t,e)||Object(n.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Zd8l:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r("ODXe"),o=r("q1tI"),c=r.n(o),a=r("KQm4"),s=function(t){var e=c.a.useRef(),r=c.a.useState(!1),o=Object(n.a)(r,2),s=o[0],f=o[1],u=c.a.useState(0),i=Object(n.a)(u,2),d=i[0],p=i[1],l=c.a.useRef(0),h=c.a.useMemo((function(){if(!t)return null;var e=function(t){var e=[].concat(Object(a.a)(t.bpm.map((function(t){return{offset:t.startOffset,bpm:t.bpm}}))),Object(a.a)(t.stops.map((function(t){return{offset:t.offset,stop:t.duration}})))).sort((function(t,e){return t.offset-e.offset})),r=[{time:0,offset:0,bpm:e.shift().bpm}];return e.forEach((function(t){var e=r[0].bpm,n=4*(t.offset-r[0].offset)/e*60,o=r[0].time+n;"bpm"in t?r.unshift({time:o,offset:t.offset,bpm:t.bpm}):(r.unshift({time:o,offset:t.offset,bpm:0}),r.unshift({time:o+t.stop,offset:t.offset,bpm:e}))})),r.reverse()}(t);return function(t){var r;for(r=l.current;e[r+1]&&e[r+1].time<t;r++);return l.current=r,(t-e[r].time)*e[r].bpm/60/4+e[r].offset}}),[t]),b=c.a.useCallback((function(){t&&(e.current=(new Date).getTime(),l.current=0,p(0),f(!0))}),[t,p,f]),v=c.a.useCallback((function(){f(!1)}),[p,f]);return c.a.useEffect((function(){v()}),[t,v]),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=c.a.useRef();c.a.useEffect((function(){return e.current=requestAnimationFrame((function r(){e.current=requestAnimationFrame(r),t()})),function(){e.current&&cancelAnimationFrame(e.current)}}),[t])}(c.a.useCallback((function(){s&&h&&e.current&&p(h(((new Date).getTime()-e.current)/1e3))}),[h,s,p])),[d,s,b,v]}},a3WO:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return n}))},dWXJ:function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return f})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return p}));var n=r("o0o1"),o=r.n(n),c=r("ODXe"),a=r("HaE+"),s=null,f={tick:null,stop:null,bpm:null,shock:null,beat:null},u={normal:null,suppressed:null},i=[["normal",1],["suppressed",.25]],d=[["tick","/stepcharts/cursor12.mp3"],["stop","/stepcharts/cursor4.mp3"],["bpm","/stepcharts/cancel1.mp3"],["shock","/stepcharts/cursor7.mp3"],["beat","/stepcharts/cursor6.mp3"]],p=function(){var t=Object(a.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=6;break}return e=new AudioContext,s=e,i.forEach((function(t){var r=Object(c.a)(t,2),n=r[0],o=r[1],a=new GainNode(e);a.gain.value=o,a.connect(e.destination),u[n]=a})),t.next=6,Promise.all(d.map(function(){var t=Object(a.a)(o.a.mark((function t(r){var n,a,s,u,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(c.a)(r,2),a=n[0],s=n[1],t.next=3,fetch(s);case 3:return u=t.sent,t.next=6,u.arrayBuffer();case 6:return i=t.sent,t.next=9,e.decodeAudioData(i);case 9:f[a]=t.sent;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},o0o1:function(t,e,r){t.exports=r("ls82")},pEhc:function(t,e,r){"use strict";var n=r("q1tI"),o=r.n(n),c=r("dWXJ");e.a=function(t){var e=t.chart,r=t.offset,n=o.a.useRef(0),a=o.a.useRef(Math.floor(e.arrows[e.arrows.length-1].offset)+1);o.a.useEffect((function(){if(c.b&&c.a.beat&&c.c.suppressed&&a.current&&n.current<=r&&r<=a.current){var t=new AudioBufferSourceNode(c.b);t.buffer=c.a.beat,t.connect(c.c.suppressed),t.start(),n.current=r-r%.25+.25}}),[r]);var s=o.a.useRef(0);o.a.useEffect((function(){if(c.b&&c.a.tick&&c.a.shock&&c.c.normal&&c.c.suppressed&&e.arrows[s.current]&&e.arrows[s.current].offset<=r){var t,n=new AudioBufferSourceNode(c.b),o=e.arrows[s.current].direction.match(/M/),a=e.arrows[s.current].direction.match(/[12].*[12]/);if(n.buffer=o?c.a.shock:c.a.tick,n.connect(o?c.c.suppressed:c.c.normal),a){var f=new AudioBufferSourceNode(c.b);f.buffer=c.a.tick,f.connect(c.c.normal),f.start()}for(n.start(),t=s.current+1;e.arrows[t]&&e.arrows[t].offset<=r;t++);s.current=t}}),[r]);var f=o.a.useRef(0);o.a.useEffect((function(){if(c.b&&c.a.stop&&c.c.suppressed&&e.stops[f.current]&&e.stops[f.current].offset<=r){var t,n=new AudioBufferSourceNode(c.b);for(n.buffer=c.a.stop,n.connect(c.c.suppressed),n.start(),t=f.current+1;e.stops[t]&&e.stops[t].offset<=r;t++);f.current=t}}),[r]);var u=o.a.useRef(0);return o.a.useEffect((function(){r<u.current&&(n.current=r-r%.25,s.current=e.arrows.findIndex((function(t){return r<t.offset})),f.current=e.stops.findIndex((function(t){return r<t.offset}))),u.current=r}),[r,e]),null}},vnkr:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[mix]/[title]/[type]",function(){return r("N+kb")}])}},[["vnkr",0,2,1]]]);