_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"N+kb":function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSG",(function(){return X}));var o=n("q1tI"),a=n.n(o),r=n("o0o1"),c=n.n(r),i=n("HaE+"),s=n("ODXe"),l=n("rePB");function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var u=n("kelf"),d=[{name:"OFF",shortName:"OFF"},{name:"LEFT",shortName:"\u2190"},{name:"RIGHT",shortName:"\u2192"},{name:"MIRROR",shortName:"\u21d4"},{name:"SHUFFLE1 (\u2192\u2191)",shortName:"?1"},{name:"SHUFFLE2 (\u2193\u2190)",shortName:"?2"},{name:"SHUFFLE3 (\u2191\u2190)",shortName:"?3"},{name:"SHUFFLE4 (\u2192\u2191)",shortName:"?4"},{name:"SHUFFLE5 (\u2191\u2193)",shortName:"?5"},{name:"SHUFFLE6 (\u2192\u2190)",shortName:"?6"},{name:"SHUFFLE1+LEFT",shortName:"?1 + \u2190"},{name:"SHUFFLE2+LEFT",shortName:"?2 + \u2190"},{name:"SHUFFLE3+LEFT",shortName:"?3 + \u2190"},{name:"SHUFFLE4+LEFT",shortName:"?4 + \u2190"},{name:"SHUFFLE5+LEFT",shortName:"?5 + \u2190"},{name:"SHUFFLE1+RIGHT",shortName:"?1 + \u2192"},{name:"SHUFFLE2+RIGHT",shortName:"?2 + \u2192"},{name:"SHUFFLE3+RIGHT",shortName:"?3 + \u2192"},{name:"SHUFFLE4+RIGHT",shortName:"?4 + \u2192"},{name:"SHUFFLE5+RIGHT",shortName:"?5 + \u2192"},{name:"SHUFFLE1+MIRROR",shortName:"?1 + \u21d4"},{name:"SHUFFLE2+MIRROR",shortName:"?2 + \u21d4"},{name:"SHUFFLE3+MIRROR",shortName:"?3 + \u21d4"},{name:"SHUFFLE4+MIRROR",shortName:"?4 + \u21d4"}],p={OFF:[0,1,2,3],LEFT:[2,0,3,1],RIGHT:[1,3,0,2],MIRROR:[3,2,1,0],"SHUFFLE1 (\u2192\u2191)":[0,1,3,2],"SHUFFLE2 (\u2193\u2190)":[1,0,2,3],"SHUFFLE3 (\u2191\u2190)":[2,1,0,3],"SHUFFLE4 (\u2192\u2191)":[0,3,2,1],"SHUFFLE5 (\u2191\u2193)":[0,2,1,3],"SHUFFLE6 (\u2192\u2190)":[3,1,2,0],"SHUFFLE1+LEFT":[3,0,2,1],"SHUFFLE2+LEFT":[2,1,3,0],"SHUFFLE3+LEFT":[0,2,3,1],"SHUFFLE4+LEFT":[2,0,1,3],"SHUFFLE5+LEFT":[1,0,3,2],"SHUFFLE1+RIGHT":[1,2,0,3],"SHUFFLE2+RIGHT":[0,3,1,2],"SHUFFLE3+RIGHT":[1,3,2,0],"SHUFFLE4+RIGHT":[3,1,0,2],"SHUFFLE5+RIGHT":[2,3,0,1],"SHUFFLE1+MIRROR":[2,3,1,0],"SHUFFLE2+MIRROR":[3,2,0,1],"SHUFFLE3+MIRROR":[3,0,1,2],"SHUFFLE4+MIRROR":[1,2,3,0]},m=a.a.createElement,v=13.5,f=16.875,g={4:"/stepcharts/arrow4.svg",6:"/stepcharts/arrow6.svg",8:"/stepcharts/arrow8.svg",12:"/stepcharts/arrow6.svg",16:"/stepcharts/arrow16.svg",24:"/stepcharts/arrow6.svg",32:"/stepcharts/arrow6.svg",64:"/stepcharts/arrow6.svg",other:"/stepcharts/arrow6.svg",shock:"/stepcharts/arrowShock.svg",freeze:"/stepcharts/arrowFreeze.svg"},F={4:"/stepcharts/arrow4.svg",6:"/stepcharts/arrow6.svg",8:"/stepcharts/arrow8.svg",12:"/stepcharts/arrow6.svg",16:"/stepcharts/arrow16.svg",24:"/stepcharts/arrow24.svg",32:"/stepcharts/arrow32.svg",64:"/stepcharts/arrow64.svg",other:"/stepcharts/arrowOther.svg",shock:"/stepcharts/arrowShock.svg",freeze:"/stepcharts/arrowFreeze.svg"},b={0:"-90deg",1:"180deg",2:"0",3:"90deg"},k=function(e,t){return 4*e*13.3*t+f},w=function(e,t){return(e-f)/4/13.3/t},y=function(e){var t=e.offset,n=e.speed,o={position:"absolute",top:"".concat(k(t,n),"vh"),width:1,height:1};return m("div",{style:o})},C=function(e){var t=e.beat,n=e.direction,o=e.pos,a=e.highlight,r=void 0!==a&&a,c=e.verboseColors,i=void 0!==c&&c,s={position:"absolute",top:"".concat(o-6.75,"vh"),left:"".concat(n*v,"vh"),width:"".concat(v,"vh"),backgroundColor:r?"#fff6":void 0,boxShadow:r?"0 0 ".concat(3.375,"vh #fff"):void 0,borderRadius:"".concat(6.75,"vh"),transform:"rotate(".concat(b[n],")")};return m("img",{style:s,src:i?F[t]:g[t]})},E=function(e){var t=e.direction,n=e.pos,o=e.endPos,r=e.diminished,c={position:"absolute",top:"".concat(n,"vh"),left:"".concat(t*v+.675,"vh"),height:"".concat(o-n,"vh"),width:"".concat(12.15,"vh"),opacity:r?.3:1,backgroundColor:"#88ee44"},i={position:"absolute",top:"".concat(o,"vh"),left:"".concat(t*v+.675,"vh"),height:0,width:"".concat(12.15,"vh"),opacity:r?.3:1,borderTop:"".concat(6.075,"vh solid #66cc22"),borderLeft:"".concat(6.075,"vh solid transparent"),borderRight:"".concat(6.075,"vh solid transparent")};return m(a.a.Fragment,null,m("div",{style:c}),m("div",{style:i}))},S=function(e){var t=e.pos,n=e.color,o=e.value,a={position:"absolute",width:"".concat(54,"vh"),left:0,top:"".concat(t,"vh"),borderTop:n?"4px solid ".concat(n):void 0};return m("div",{style:a},o&&m("div",{style:{position:"absolute",width:"100%",color:n,textAlign:"center",top:"4px"}},o))},O=function(e){var t=e.pos,n=e.endPos,o=e.color,a={position:"absolute",height:"".concat(n?n-t:0,"vh"),width:"".concat(54,"vh"),left:0,top:"".concat(t,"vh"),backgroundColor:o,opacity:.25};return m("div",{style:a})},T=function(){var e={position:"fixed",top:"".concat(10.125,"vh"),pointerEvents:"none"},t=function(e){return{display:"inline-block",height:"".concat(v,"vh"),width:"".concat(v,"vh"),backgroundImage:"url(/stepcharts/arrowJudge.svg)",backgroundSize:"cover",transform:"rotate(".concat(b[e],")")}};return m("div",{style:e},m("div",{style:t(0)}),m("div",{style:t(1)}),m("div",{style:t(2)}),m("div",{style:t(3)}))},R=function(e,t){return function(n){return k(t?n.time:n.offset,e)}},L=function(e){var t=e.chart,n=e.speed,o=void 0===n?1:n,r=e.showBeat,c=e.constantMode,i=e.soflanBg,s=e.soflanValue,l=R(o,c),h=t.mainBpm,u=t.beatTimeline[t.beatTimeline.length-1];return m(a.a.Fragment,null,r&&t.beatTimeline.map((function(e,t){return m(S,{key:"b".concat(t),pos:l(e),color:t%4===0?"#aaa":"#555"})})),i&&t.bpmTimeline.map((function(e,t,n){var o;return h!==e.bpm&&m(O,{key:"bg".concat(t),pos:l(e),endPos:l(null!==(o=n[t+1])&&void 0!==o?o:u),color:0===e.bpm?"#FF8082":e.bpm>h?"#F6AA00":"#4DC4FF"})})),s&&t.bpmTimeline.map((function(e,t,n){return t>0&&(0===e.bpm?m(S,{key:"bar".concat(t),pos:l(e),color:"#FF8082"}):(n[t-1].bpm||n[t-2].bpm)<e.bpm?m(S,{key:"bar".concat(t),pos:l(e),color:"#F6AA00",value:e.bpm}):e.bpm<(n[t-1].bpm||n[t-2].bpm)?m(S,{key:"bar".concat(t),pos:l(e),color:"#4DC4FF",value:e.bpm}):null)})))},H=function(e){var t=e.chart,n=e.canonicalChart,o=e.speed,r=void 0===o?1:o,c=e.turn,i=void 0===c?"OFF":c,s=e.constantMode,l=e.colorFreezes,u=e.diminishFreezes,d=e.highlightSoflan,v=e.verboseColors,f=e.canonicalColors,g=t.arrowTimeline[t.arrowTimeline.length-1],F=Math.floor(g.offset),b=R(r,s),k=function(e){return t.arrowTimeline[e].direction.match(/2/)&&!l?"freeze":f?n.arrowTimeline[e].beat:t.arrowTimeline[e].beat};return m(a.a.Fragment,null,t.freezeTimeline.map((function(e,t){return m(E,{key:"f".concat(t),direction:p[i][e.direction],pos:b(e.start),endPos:b(e.end),diminished:u})})).reverse(),t.arrowTimeline.map((function(e,t){var n={beat:"shock",highlight:d&&!!e.tags.soflanTrigger,pos:b(e)};return"MMMM"===e.direction&&m(a.a.Fragment,null,m(C,h({key:"s".concat(t,"l"),direction:p[i][0]},n)),m(C,h({key:"s".concat(t,"d"),direction:p[i][1]},n)),m(C,h({key:"s".concat(t,"u"),direction:p[i][2]},n)),m(C,h({key:"s".concat(t,"r"),direction:p[i][3]},n)))})).reverse(),t.arrowTimeline.map((function(e,t){return e.direction.match(/^..[12]./)&&m(C,{key:"a".concat(t,"u"),beat:k(t),direction:p[i][2],pos:b(e),highlight:d&&!!e.tags.soflanTrigger,verboseColors:v})})),t.arrowTimeline.map((function(e,t){var n={beat:k(t),pos:b(e),highlight:d&&!!e.tags.soflanTrigger,verboseColors:v};return m(a.a.Fragment,null,e.direction.match(/^[12].../)&&m(C,h({key:"a".concat(t,"l"),direction:p[i][0]},n)),e.direction.match(/^.[12]../)&&m(C,h({key:"a".concat(t,"d"),direction:p[i][1]},n)),e.direction.match(/^...[12]/)&&m(C,h({key:"a".concat(t,"r"),direction:p[i][3]},n)))})).reverse(),m(y,{offset:F+2,speed:r}))},U=a.a.memo(L),M=a.a.memo(H),N=function(e){var t=e.chart,n=e.canonicalChart,o=e.speed,r=void 0===o?1:o,c=e.turn,i=void 0===c?"OFF":c,s=e.offsetRef,l=e.timeRef,h=e.setOffset,d=e.setTime,p=e.playing,v=e.showBeat,g=e.constantMode,F=void 0!==g&&g,b=e.colorFreezes,y=void 0!==b&&b,C=e.diminishFreezes,E=void 0!==C&&C,S=e.soflanBg,O=void 0!==S&&S,R=e.soflanValue,L=void 0!==R&&R,H=e.highlightSoflan,N=void 0!==H&&H,I=e.verboseColors,x=void 0!==I&&I,B=e.canonicalColors,P=void 0!==B&&B,z=e.children,j=a.a.useRef(),_=a.a.useRef(),G=a.a.useCallback((function(e){if(e){var t=e.getBoundingClientRect();_.current=t.bottom-t.top}j.current=e}),[]);Object(u.a)((function(){j.current&&_.current&&(p?j.current.scrollTop=F?(k(l.current,r)-f)*_.current/100:(k(s.current,r)-f)*_.current/100:F?d(w(100*j.current.scrollTop/_.current+f,r)):h(w(100*j.current.scrollTop/_.current+f,r)))}),[r,F,p]);var A={position:"relative",width:"".concat(54,"vh"),margin:"auto"};return m("div",{style:{position:"relative",overflow:"scroll",backgroundColor:"black",height:"100vh",width:"100vw"},ref:G},m("div",{style:A},m(U,{chart:t,speed:r,showBeat:v,constantMode:F,soflanBg:O,soflanValue:L}),m(T,null),m(M,{chart:t,canonicalChart:n,speed:r,turn:i,constantMode:F,colorFreezes:y,diminishFreezes:E,highlightSoflan:N,verboseColors:x,canonicalColors:P}),z))},I=n("JePm"),x=n("Zd8l"),B=n("dWXJ"),P=a.a.createElement;function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){return Math.floor(620/e*4)/4},G=function(e){return e.arrowTimeline.reduce((function(e,t){return e+(4===t.beat?1:0)}),0)>=e.arrowTimeline.length/4},A=function(e){var t=e.chart,n=e.options,o=e.onChange,r=e.style,c=a.a.useCallback((function(e){return o(j(j({},n),{},{speed:Number(e.target.value)}))}),[n,o]),i=a.a.useCallback((function(e){return o(j(j({},n),{},{turn:e.target.value}))}),[n,o]),s=a.a.useCallback((function(e){return o(j(j({},n),{},{tick:e.target.checked}))}),[n,o]),l=a.a.useCallback((function(e){return o(j(j({},n),{},{constantMode:e.target.checked,speed:_(e.target.checked?240:n.canonicalMode?t.canonicalChart.mainBpm:t.chart.mainBpm)}))}),[n,o]),h=a.a.useCallback((function(e){return o(j(j({},n),{},{canonicalMode:e.target.checked,speed:_(n.constantMode?240:e.target.checked?t.canonicalChart.mainBpm:t.chart.mainBpm),tick:G(e.target.checked?t.canonicalChart:t.chart)}))}),[n,o]),u=a.a.useCallback((function(e){return o(j(j({},n),{},{colorFreezes:e.target.checked}))}),[n,o]),p=a.a.useCallback((function(e){return o(j(j({},n),{},{diminishFreezes:e.target.checked}))}),[n,o]),m=a.a.useCallback((function(e){return o(j(j({},n),{},{soflanBg:e.target.checked}))}),[n,o]),v=a.a.useCallback((function(e){return o(j(j({},n),{},{soflanValue:e.target.checked}))}),[n,o]),f=a.a.useCallback((function(e){return o(j(j({},n),{},{highlightSoflan:e.target.checked}))}),[n,o]),g=a.a.useCallback((function(e){return o(j(j({},n),{},{verboseColors:e.target.checked}))}),[n,o]),F=a.a.useCallback((function(e){return o(j(j({},n),{},{canonicalColors:e.target.checked}))}),[n,o]),b=n.canonicalMode?t.canonicalChart:t.chart,k=b.minBpm,w=b.mainBpm,y=b.maxBpm;return P("div",{style:r},P("div",null,"Speed:"," ",P("input",{type:"range",min:"0.25",max:"8",step:"0.25",value:n.speed,onInput:c}),"x",n.speed,n.constantMode?"(".concat(240*n.speed,")"):P(a.a.Fragment,null," (",k!==w?"".concat(k*n.speed,"-"):"",w*n.speed,w!==y?"-".concat(y*n.speed):"",")")),P("div",null,P("label",null,"\u30b9\u30af\u30ed\u30fc\u30eb\u901f\u5ea6\u3092\u4e00\u5b9a\u306b"," ",P("input",{type:"checkbox",checked:n.constantMode,onChange:l}))),P("div",null,"TURN:"," ",P("select",{value:n.turn,onInput:i},d.map((function(e){return P("option",{key:e.name,value:e.name},"TURN: ",e.name)})))),P("div",null,P("label",null,"\u30d5\u30ea\u30fc\u30ba\u3082\u8272\u5206\u3051\u3059\u308b"," ",P("input",{type:"checkbox",checked:n.colorFreezes,onChange:u}))),P("div",null,P("label",null,"\u30d5\u30ea\u30fc\u30ba\u306e\u68d2\u90e8\u5206\u3092\u63a7\u3048\u3081\u306b\u8868\u793a"," ",P("input",{type:"checkbox",checked:n.diminishFreezes,onChange:p}))),P("div",null,P("label",null,"\u4f4e\u901f\u30fb\u9ad8\u901f\u5730\u5e2f\u3092\u8272\u5206\u3051"," ",P("input",{type:"checkbox",checked:n.soflanBg,onChange:m}))),P("div",null,P("label",null,"\u30bd\u30d5\u30e9\u30f3\u7b87\u6240\u306b\u76ee\u5370\u3092\u8868\u793a"," ",P("input",{type:"checkbox",checked:n.soflanValue,onChange:v}))),P("div",null,P("label",null,"\u30bd\u30d5\u30e9\u30f3\u76f4\u524d\u306e\u30ce\u30fc\u30c8\u3092\u30cf\u30a4\u30e9\u30a4\u30c8"," ",P("input",{type:"checkbox",checked:n.highlightSoflan,onChange:f}))),P("div",null,P("label",null,"24 \u5206\u4ee5\u4e0b\u306e\u30ce\u30fc\u30c8\u3082\u8272\u5206\u3051"," ",P("input",{type:"checkbox",checked:n.verboseColors,onChange:g}))),P("div",null,P("label",null,"\u5c0f\u7bc0\u7dda\u3092\u8868\u793a\uff06\u30e1\u30c8\u30ed\u30ce\u30fc\u30e0\u3092\u518d\u751f"," ",P("input",{type:"checkbox",checked:n.tick,onChange:s}))),P("div",null,P("label",null,"\u8272\u5206\u3051\u3092\u30bd\u30d5\u30e9\u30f3\u306b\u8ffd\u5f93\uff08\u03b2\uff1a\u4e00\u90e8\u306e\u8b5c\u9762\u3067\u975e\u5bfe\u5fdc\uff09"," ",P("input",{type:"checkbox",checked:n.canonicalColors,onChange:F}))),P("div",null,P("label",null,"show canonical chart\uff08\u203b\u30c7\u30d0\u30c3\u30b0\u7528\uff09"," ",P("input",{type:"checkbox",checked:n.canonicalMode,onChange:h}))))},V=function(e){var t=e.onPlay,n=e.onPause,o=e.onOpenOptions,a=e.onCloseOptions,r=e.playing,c=e.opened,i={color:"white",fontWeight:"bold",backgroundColor:"#ea0",borderRadius:"0.75em",padding:"0.5em 0.75em",border:"none",marginRight:"1em"};return P("div",null,P("button",{onClick:r?n:t,style:i},r?"STOP":"PLAY"),P("button",{onClick:c?a:o,style:i},c?"x CLOSE":"OPTIONS"))},D=function(e){var t=e.chart,n=a.a.useState(!1),o=Object(s.a)(n,2),r=o[0],l=o[1],h=a.a.useState({speed:_(t.chart.mainBpm),turn:"OFF",tick:G(t.chart),constantMode:!1,colorFreezes:!0,diminishFreezes:!0,soflanBg:!0,soflanValue:!0,highlightSoflan:!0,verboseColors:!0,canonicalColors:!1,canonicalMode:!1}),u=Object(s.a)(h,2),d=u[0],p=u[1],m=Object(x.a)(d.canonicalMode?t.canonicalChart:t.chart),v=Object(s.a)(m,7),f=v[0],g=v[1],F=v[2],b=v[3],k=v[4],w=v[5],y=v[6],C=a.a.useCallback((function(){return l(!1)}),[l]),E=a.a.useCallback((function(){return l(!0)}),[l]),S=a.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.d)();case 2:b(!0);case 3:case"end":return e.stop()}}),e)}))),[b]),O={position:"fixed",textAlign:"center",bottom:"1em",width:"".concat(54,"vh")};return P(a.a.Fragment,null,P(N,{chart:d.canonicalMode?t.canonicalChart:t.chart,canonicalChart:t.canonicalChart,speed:d.speed,offsetRef:f,timeRef:g,setOffset:y,setTime:w,playing:F,turn:d.turn,showBeat:d.tick,constantMode:d.constantMode,colorFreezes:d.colorFreezes,diminishFreezes:d.diminishFreezes,soflanBg:d.soflanBg,soflanValue:d.soflanValue,highlightSoflan:d.highlightSoflan,verboseColors:d.verboseColors,canonicalColors:d.canonicalColors},P("div",{style:O},r&&P(A,{chart:t,options:d,onChange:p,style:{textAlign:"left",padding:"1em",marginBottom:"1em",background:"#ffffffa0",lineHeight:"2"}}),P(V,{playing:F,opened:r,onPlay:S,onPause:k,onOpenOptions:E,onCloseOptions:C}))),P(I.a,{chart:d.canonicalMode?t.canonicalChart:t.chart,timeRef:g,playing:F,enableBeatTick:d.tick}))},J=a.a.createElement,X=!0;t.default=function(e){var t=e.chart;return J(D,{chart:t})}},vnkr:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[mix]/[title]/[type]",function(){return n("N+kb")}])}},[["vnkr",0,2,1,4]]]);