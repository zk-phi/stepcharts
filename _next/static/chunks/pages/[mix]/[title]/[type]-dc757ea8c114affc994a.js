_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{BsWD:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("a3WO");function o(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},"HaE+":function(e,t,n){"use strict";function r(e,t,n,r,o,c,a){try{var u=e[c](a),i=u.value}catch(f){return void n(f)}u.done?t(i):Promise.resolve(i).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,c){var a=e.apply(t,n);function u(e){r(a,o,c,u,i,"next",e)}function i(e){r(a,o,c,u,i,"throw",e)}u(void 0)}))}}n.d(t,"a",(function(){return o}))},KQm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("a3WO");var o=n("BsWD");function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"N+kb":function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSG",(function(){return I}));var r=n("q1tI"),o=n.n(r),c=n("o0o1"),a=n.n(c),u=n("HaE+"),i=n("ODXe"),f=n("KQm4"),s=n("kelf"),l=o.a.createElement,d=13.5,p=16.875,h={4:"/stepcharts/arrow4.svg",6:"/stepcharts/arrow6.svg",8:"/stepcharts/arrow8.svg",12:"/stepcharts/arrow6.svg",16:"/stepcharts/arrow16.svg",shock:"/stepcharts/arrowShock.svg",freeze:"/stepcharts/arrowFreeze.svg"},m={0:"-90deg",1:"180deg",2:"0",3:"90deg"},b={off:[0,1,2,3],mirror:[3,2,1,0],left:[1,3,0,2],right:[2,0,3,1]},v=function(e,t){return 4*e*13.3*t+p},k=function(e){var t=e.offset,n=e.speed,r={position:"absolute",top:"".concat(v(t,n),"vh"),width:1,height:1};return l("div",{style:r})},y=function(e){var t=e.beat,n=e.direction,r=e.offset,o=e.speed,c={position:"absolute",top:"".concat(v(r,o)-6.75,"vh"),left:"".concat(n*d,"vh"),height:"".concat(d,"vh"),width:"".concat(d,"vh"),background:"url(".concat(h[t],")"),backgroundSize:"cover",transform:"rotate(".concat(m[n],")")};return l("div",{style:c})},w=function(e){var t=e.direction,n=e.offset,r=e.endOffset,c=e.speed,a={position:"absolute",top:"".concat(v(n,c),"vh"),left:"".concat(t*d+.675,"vh"),height:"".concat(4*(r-n-.25)*c*13.3,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#5e5"},u={position:"absolute",top:"".concat(v(r-.25,c),"vh"),left:"".concat(t*d+.675,"vh"),height:"".concat(6.075,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#3b3"};return l(o.a.Fragment,null,l("div",{style:a}),l("div",{style:u}))},g=function(e){var t=e.offset,n=e.speed,r=e.color,o={position:"absolute",height:0,width:"".concat(54,"vh"),left:0,top:"".concat(v(t,n),"vh"),border:"2px solid ".concat(r)};return l("div",{style:o})},O=function(){var e={position:"absolute",height:0,width:"".concat(54,"vh"),left:0,top:"".concat(10.125,"vh"),border:"".concat(6.75,"vh solid #ffffff60")};return l("div",{style:e})},j=function(e){var t=e.chart,n=e.speed,r=void 0===n?1:n,c=e.turn,a=void 0===c?"off":c,u=e.showBeat,i=Math.floor(t.arrows[t.arrows.length-1].offset),s=Object(f.a)(t.arrows).reverse(),d=Object(f.a)(t.freezes).reverse();return l(o.a.Fragment,null,u&&Object(f.a)(Array(4*(i+1))).map((function(e,t){return l(g,{key:"b".concat(t),offset:t/4,speed:r,color:t%4===0?"#888":"#444"})})),t.bpmTimeline.map((function(e,t,n){return 0===t?null:0===e.bpm?l(g,{key:"ts".concat(t),offset:e.offset,speed:r,color:"#4f4"}):0===n[t-1].bpm?null:n[t-1].bpm<e.bpm?l(g,{key:"ts".concat(t),offset:e.offset,speed:r,color:"#fc4"}):l(g,{key:"ts".concat(t),offset:e.offset,speed:r,color:"#4cf"})})),d.map((function(e,t){return l(w,{key:"f".concat(t),direction:b[a][e.direction],offset:e.startOffset,endOffset:e.endOffset,speed:r})})),s.map((function(e,t){var n=e.direction.match(/2/)?"freeze":e.beat;return l(o.a.Fragment,null,e.direction.match(/^1.../)&&l(y,{key:"a".concat(t,"l"),beat:n,direction:b[a][0],offset:e.offset,speed:r}),e.direction.match(/^.1../)&&l(y,{key:"a".concat(t,"d"),beat:n,direction:b[a][1],offset:e.offset,speed:r}),e.direction.match(/^..1./)&&l(y,{key:"a".concat(t,"u"),beat:n,direction:b[a][2],offset:e.offset,speed:r}),e.direction.match(/^...1/)&&l(y,{key:"a".concat(t,"r"),beat:n,direction:b[a][3],offset:e.offset,speed:r}),e.direction.match(/^2.../)&&l(y,{key:"a".concat(t,"l"),beat:"freeze",direction:b[a][0],offset:e.offset,speed:r}),e.direction.match(/^.2../)&&l(y,{key:"a".concat(t,"d"),beat:"freeze",direction:b[a][1],offset:e.offset,speed:r}),e.direction.match(/^..2./)&&l(y,{key:"a".concat(t,"u"),beat:"freeze",direction:b[a][2],offset:e.offset,speed:r}),e.direction.match(/^...2/)&&l(y,{key:"a".concat(t,"r"),beat:"freeze",direction:b[a][3],offset:e.offset,speed:r}),e.direction.match(/^M.../)&&l(y,{key:"a".concat(t,"l"),beat:"shock",direction:b[a][0],offset:e.offset,speed:r}),e.direction.match(/^.M../)&&l(y,{key:"a".concat(t,"d"),beat:"shock",direction:b[a][1],offset:e.offset,speed:r}),e.direction.match(/^..M./)&&l(y,{key:"a".concat(t,"u"),beat:"shock",direction:b[a][2],offset:e.offset,speed:r}),e.direction.match(/^...M/)&&l(y,{key:"a".concat(t,"r"),beat:"shock",direction:b[a][3],offset:e.offset,speed:r}))})),l(k,{offset:i+2,speed:r}))},C=o.a.memo(j),x=function(e){var t=e.offsetRef,n=e.speed,r=void 0===n?1:n,c=e.playing,a=e.children,u=o.a.useRef(null),i={position:"relative",width:"".concat(54,"vh"),height:"100vh",backgroundColor:"black",overflow:"scroll"},f=o.a.useMemo((function(){if(u.current&&c){var e=u.current.getBoundingClientRect();return e.bottom-e.top}return 0}),[u,c]),d=o.a.useRef();return Object(s.a)((function(){u.current&&t.current&&t.current!=d.current&&(u.current.scrollTop=(v(t.current,r)-p)*f/100,d.current=t.current)}),[u,t,d,r,f]),l("div",{ref:u,style:i},a)},B=function(e){var t=e.chart,n=e.speed,r=void 0===n?1:n,o=e.turn,c=void 0===o?"off":o,a=e.offsetRef,u=e.playing,i=e.showBeat;return l("div",{style:{position:"relative"}},l(x,{offsetRef:a,speed:r,playing:u},l(C,{chart:t,speed:r,turn:c,showBeat:i})),l(O,null))},S=n("pEhc"),T=n("Zd8l"),E=n("dWXJ"),A=o.a.createElement,R=function(e){var t=e.chart,n=Object(T.a)(t),r=Object(i.a)(n,4),c=r[0],f=r[1],s=r[2],l=r[3],d=o.a.useState((function(){return Math.floor(620/t.meta.mainBpm*4)/4})),p=Object(i.a)(d,2),h=p[0],m=p[1],b=o.a.useState((function(){return t.arrows.reduce((function(e,t){return e+(4===t.beat?1:0)}),0)>=t.arrows.length/4})),v=Object(i.a)(b,2),k=v[0],y=v[1],w=o.a.useState("off"),g=Object(i.a)(w,2),O=g[0],j=g[1],C=o.a.useState(!1),x=Object(i.a)(C,2),R=x[0],_=x[1],I=o.a.useCallback((function(e){return m(Number(e.target.value))}),[m]),M=o.a.useCallback((function(e){return j(e.target.value)}),[j]),N=o.a.useCallback((function(e){return y(e.target.checked)}),[y]),D=o.a.useCallback((function(){return _(!1)}),[_]),z=o.a.useCallback((function(){return _(!0)}),[_]),W=o.a.useCallback(Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.d)();case 2:s(),_(!1);case 4:case"end":return e.stop()}}),e)}))),[s]),X=o.a.useCallback((function(){l(),_(!1)}),[l]);return A("div",{style:{display:"flex"}},A(B,{chart:t,speed:h,offsetRef:c,playing:f,turn:O,showBeat:k}),A(S.a,{chart:t,offsetRef:c,enableBeatTick:k}),R&&A("div",{style:{position:"absolute",padding:16,width:"100vw",height:"100vh",background:"#ffffff80"}},A("div",null,"Speed:"," ",A("input",{type:"range",min:"0.25",max:"8",step:"0.25",value:h,onInput:I}),"x",h," (",t.meta.minBpm!==t.meta.mainBpm?"".concat(t.meta.minBpm*h,"-"):"",t.meta.mainBpm*h,t.meta.mainBpm!==t.meta.maxBpm?"-".concat(t.meta.maxBpm*h):"",")"),A("div",null,"Turn:"," ",A("select",{value:O,onInput:M},A("option",{value:"off"},"off"),A("option",{value:"mirror"},"mirror"),A("option",{value:"left"},"left"),A("option",{value:"right"},"right"))),A("div",null,"Beat:"," ",A("input",{type:"checkbox",checked:k,onChange:N})),A("button",{onClick:D},"[Close]")," ",f?A("button",{onClick:X},"[STOP]"):A("button",{onClick:W},"[PLAY]")),A("button",{onClick:z},"\u2699\ufe0f"))},_=o.a.createElement,I=!0;t.default=function(e){var t=e.chart;return _(R,{chart:t})}},ODXe:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("BsWD");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,c=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(i){o=!0,c=i}finally{try{r||null==u.return||u.return()}finally{if(o)throw c}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Zd8l:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("ODXe"),o=n("q1tI"),c=n.n(o),a=n("kelf"),u=function(e){var t=c.a.useRef(),n=c.a.useState(!1),o=Object(r.a)(n,2),u=o[0],i=o[1],f=c.a.useRef(0),s=c.a.useRef(0),l=c.a.useMemo((function(){if(!e)return null;var t=e.bpmTimeline;return function(e){var n;for(n=s.current;t[n+1]&&t[n+1].time<e;n++);return s.current=n,(e-t[n].time)*t[n].bpm/60/4+t[n].offset}}),[e,s]),d=c.a.useCallback((function(){e&&(t.current=(new Date).getTime(),s.current=0,f.current=0,i(!0))}),[e,t,s,f,i]),p=c.a.useCallback((function(){i(!1)}),[i]);return c.a.useEffect((function(){p()}),[e,p]),Object(a.a)((function(){u&&l&&t.current&&(f.current=l(((new Date).getTime()-t.current)/1e3))}),[u,l,t,f]),[f,u,d,p]}},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},dWXJ:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d}));var r=n("o0o1"),o=n.n(r),c=n("ODXe"),a=n("HaE+"),u=null,i={tick:null,stop:null,bpm:null,shock:null,beat:null},f={normal:null,suppressed:null},s=[["normal",1],["suppressed",.25]],l=[["tick","/stepcharts/cursor12.mp3"],["stop","/stepcharts/cursor4.mp3"],["bpm","/stepcharts/cancel1.mp3"],["shock","/stepcharts/cursor7.mp3"],["beat","/stepcharts/cursor6.mp3"]],d=function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=6;break}return t=new AudioContext,u=t,s.forEach((function(e){var n=Object(c.a)(e,2),r=n[0],o=n[1],a=new GainNode(t);a.gain.value=o,a.connect(t.destination),f[r]=a})),e.next=6,Promise.all(l.map(function(){var e=Object(a.a)(o.a.mark((function e(n){var r,a,u,f,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.a)(n,2),a=r[0],u=r[1],e.next=3,fetch(u);case 3:return f=e.sent,e.next=6,f.arrayBuffer();case 6:return s=e.sent,e.next=9,t.decodeAudioData(s);case 9:i[a]=e.sent;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},kelf:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("q1tI"),o=n.n(r),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0,n=o.a.useRef(),r=o.a.useCallback(e,t);o.a.useEffect((function(){return n.current=requestAnimationFrame((function e(){n.current=requestAnimationFrame(e),r()})),function(){n.current&&cancelAnimationFrame(n.current)}}),[r])}},pEhc:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),c=n("dWXJ"),a=n("kelf"),u=function(e,t,n){if(c.b&&e&&t){var r=new AudioBufferSourceNode(c.b);return r.buffer=t,n&&(r.detune.value=n),r.connect(e),r.start(),!0}return!1};t.a=function(e){var t=e.chart,n=e.offsetRef,r=e.enableBeatTick,i=o.a.useMemo((function(){return Math.floor(t.arrows[t.arrows.length-1].offset)+1}),[t]),f=o.a.useRef(0),s=o.a.useCallback((function(){if(r&&f.current<n.current&&n.current<=i){var e=f.current%1===0?400:0;u(c.c.suppressed,c.a.beat,e)&&(f.current=n.current-n.current%.25+.25)}}),[r,n,i,f]),l=o.a.useRef(0),d=o.a.useCallback((function(){if(t.arrows[l.current]&&t.arrows[l.current].offset<=n.current){if(t.arrows[l.current].direction.match(/M/))u(c.c.suppressed,c.a.shock);else{var e=t.arrows[l.current].direction.match(/[12].*[12]/);u(c.c.normal,c.a.tick),e&&u(c.c.normal,c.a.tick)}for(;t.arrows[l.current]&&t.arrows[l.current].offset<=n.current;)l.current++}}),[n,l,t]),p=o.a.useRef(t.bpmTimeline.findIndex((function(e){return n.current<e.offset&&0===e.bpm}))),h=o.a.useCallback((function(){if(t.bpmTimeline[p.current]&&t.bpmTimeline[p.current].offset<=n.current)for(u(c.c.suppressed,c.a.stop);t.bpmTimeline[p.current]&&(0!==t.bpmTimeline[p.current].bpm||t.bpmTimeline[p.current].offset<=n.current);)p.current++}),[n,p]),m=o.a.useRef(0),b=o.a.useCallback((function(){n.current<m.current&&(f.current=n.current-n.current%.25,l.current=t.arrows.findIndex((function(e){return n.current<e.offset})),f.current=t.bpmTimeline.findIndex((function(e){return n.current<e.offset&&0===e.bpm}))),m.current=n.current}),[n,m,t]);return Object(a.a)((function(){b(),s(),d(),h()}),[b,s,d,h]),null}},vnkr:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[mix]/[title]/[type]",function(){return n("N+kb")}])}},[["vnkr",0,2,1]]]);