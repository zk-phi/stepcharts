_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{BsWD:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("a3WO");function o(t,e){if(t){if("string"===typeof t)return Object(n.a)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(t,e):void 0}}},"HaE+":function(t,e,r){"use strict";function n(t,e,r,n,o,c,a){try{var s=t[c](a),f=s.value}catch(u){return void r(u)}s.done?e(f):Promise.resolve(f).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,c){var a=t.apply(e,r);function s(t){n(a,o,c,s,f,"next",t)}function f(t){n(a,o,c,s,f,"throw",t)}s(void 0)}))}}r.d(e,"a",(function(){return o}))},KQm4:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("a3WO");var o=r("BsWD");function c(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"N+kb":function(t,e,r){"use strict";r.r(e),r.d(e,"__N_SSG",(function(){return D}));var n=r("q1tI"),o=r.n(n),c=r("o0o1"),a=r.n(c),s=r("HaE+"),f=r("ODXe"),u=r("KQm4"),i=r("kelf"),d=o.a.createElement,l=13.5,p=16.875,h={4:"/stepcharts/arrow4.svg",6:"/stepcharts/arrow6.svg",8:"/stepcharts/arrow8.svg",12:"/stepcharts/arrow6.svg",16:"/stepcharts/arrow16.svg",shock:"/stepcharts/arrowShock.svg",freeze:"/stepcharts/arrowFreeze.svg"},b={0:"-90deg",1:"180deg",2:"0",3:"90deg"},v=function(t,e){return 4*t*13.3*e+p},m=function(t){var e=t.offset,r=t.speed,n={position:"absolute",top:"".concat(v(e,r),"vh"),width:1,height:1};return d("div",{style:n})},y=function(t){var e=t.beat,r=t.direction,n=t.offset,o=t.speed,c={position:"absolute",top:"".concat(v(n,o)-6.75,"vh"),left:"".concat(r*l,"vh"),height:"".concat(l,"vh"),width:"".concat(l,"vh"),background:"url(".concat(h[e],")"),backgroundSize:"cover",transform:"rotate(".concat(b[r],")")};return d("div",{style:c})},k=function(t){var e=t.direction,r=t.offset,n=t.endOffset,c=t.speed,a={position:"absolute",top:"".concat(v(r,c),"vh"),left:"".concat(e*l+.675,"vh"),height:"".concat(4*(n-r-.25)*c*13.3,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#5e5"},s={position:"absolute",top:"".concat(v(n-.25,c),"vh"),left:"".concat(e*l+.675,"vh"),height:"".concat(6.075,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#3b3"};return d(o.a.Fragment,null,d("div",{style:a}),d("div",{style:s}))},w=function(t){var e=t.offset,r=t.speed,n=t.color,o={position:"absolute",height:0,width:"".concat(54,"vh"),left:0,top:"".concat(v(e,r),"vh"),border:"2px solid ".concat(n)};return d("div",{style:o})},O=function(){var t={position:"absolute",height:0,width:"".concat(54,"vh"),left:0,top:"".concat(10.125,"vh"),border:"".concat(6.75,"vh solid #ffffff60")};return d("div",{style:t})},g=function(t){var e=t.chart,r=t.speed,n=void 0===r?1:r,c=Math.floor(e.arrows[e.arrows.length-1].offset),a=Object(u.a)(e.arrows).reverse(),s=Object(u.a)(e.freezes).reverse();return d(o.a.Fragment,null,Object(u.a)(Array(4*(c+1))).map((function(t,e){return d(w,{key:"b".concat(e),offset:e/4,speed:n,color:e%4===0?"#888":"#444"})})),e.bpm.map((function(t,e,r){return 0===e?null:r[e-1].bpm<t.bpm?d(w,{key:"ts".concat(e),offset:t.startOffset,speed:n,color:"#fc4"}):d(w,{key:"ts".concat(e),offset:t.startOffset,speed:n,color:"#4cf"})})),e.stops.map((function(t,e){return d(w,{key:"s".concat(e),offset:t.offset,speed:n,color:"#4f4"})})),s.map((function(t,e){return d(k,{key:"f".concat(e),direction:t.direction,offset:t.startOffset,endOffset:t.endOffset,speed:n})})),a.map((function(t,e){var r=t.direction.match(/2/)?"freeze":t.beat;return d(o.a.Fragment,null,t.direction.match(/^1.../)&&d(y,{key:"a".concat(e,"l"),beat:r,direction:0,offset:t.offset,speed:n}),t.direction.match(/^.1../)&&d(y,{key:"a".concat(e,"d"),beat:r,direction:1,offset:t.offset,speed:n}),t.direction.match(/^..1./)&&d(y,{key:"a".concat(e,"u"),beat:r,direction:2,offset:t.offset,speed:n}),t.direction.match(/^...1/)&&d(y,{key:"a".concat(e,"r"),beat:r,direction:3,offset:t.offset,speed:n}),t.direction.match(/^2.../)&&d(y,{key:"a".concat(e,"l"),beat:"freeze",direction:0,offset:t.offset,speed:n}),t.direction.match(/^.2../)&&d(y,{key:"a".concat(e,"d"),beat:"freeze",direction:1,offset:t.offset,speed:n}),t.direction.match(/^..2./)&&d(y,{key:"a".concat(e,"u"),beat:"freeze",direction:2,offset:t.offset,speed:n}),t.direction.match(/^...2/)&&d(y,{key:"a".concat(e,"r"),beat:"freeze",direction:3,offset:t.offset,speed:n}),t.direction.match(/^M.../)&&d(y,{key:"a".concat(e,"l"),beat:"shock",direction:0,offset:t.offset,speed:n}),t.direction.match(/^.M../)&&d(y,{key:"a".concat(e,"d"),beat:"shock",direction:1,offset:t.offset,speed:n}),t.direction.match(/^..M./)&&d(y,{key:"a".concat(e,"u"),beat:"shock",direction:2,offset:t.offset,speed:n}),t.direction.match(/^...M/)&&d(y,{key:"a".concat(e,"r"),beat:"shock",direction:3,offset:t.offset,speed:n}))})),d(m,{offset:c+2,speed:n}))},j=o.a.memo(g),E=function(t){var e=t.offsetRef,r=t.speed,n=void 0===r?1:r,c=t.children,a=o.a.useRef(null),s={position:"relative",width:"".concat(54,"vh"),height:"100vh",backgroundColor:"black",overflow:"scroll"},f=o.a.useRef(),u=o.a.useCallback((function(){a.current&&e.current&&e.current!=f.current&&(a.current.scrollTop=(v(e.current,n)-p)*a.current.clientHeight/100,f.current=e.current)}),[a,e,f,n]);return Object(i.a)(u),d("div",{ref:a,style:s},c)},x=function(t){var e=t.chart,r=t.speed,n=void 0===r?1:r,o=t.offsetRef;return d("div",{style:{position:"relative"}},d(E,{offsetRef:o,speed:n},d(j,{chart:e,speed:n})),d(O,null))},A=r("pEhc"),C=r("Zd8l"),R=r("dWXJ"),S=o.a.createElement,_=function(t){var e=t.chart,r=Object(C.a)(e),n=Object(f.a)(r,4),c=n[0],u=(n[1],n[2]),i=(n[3],o.a.useCallback(Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.d)();case 2:u();case 3:case"end":return t.stop()}}),t)}))),[u]));return S("div",{style:{display:"flex"}},S(x,{chart:e,speed:2,offsetRef:c}),S(A.a,{chart:e,offsetRef:c}),S("button",{onClick:i},"Play"))},I=o.a.createElement,D=!0;e.default=function(t){var e=t.chart;return I(_,{chart:e})}},ODXe:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("BsWD");function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,c=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(f){o=!0,c=f}finally{try{n||null==s.return||s.return()}finally{if(o)throw c}}return r}}(t,e)||Object(n.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Zd8l:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var n=r("ODXe"),o=r("q1tI"),c=r.n(o),a=r("KQm4"),s=r("kelf"),f=function(t){var e=c.a.useRef(),r=c.a.useState(!1),o=Object(n.a)(r,2),f=o[0],u=o[1],i=c.a.useRef(0),d=c.a.useRef(0),l=c.a.useMemo((function(){if(!t)return null;var e=function(t){var e=[].concat(Object(a.a)(t.bpm.map((function(t){return{offset:t.startOffset,bpm:t.bpm}}))),Object(a.a)(t.stops.map((function(t){return{offset:t.offset,stop:t.duration}})))).sort((function(t,e){return t.offset-e.offset})),r=[{time:0,offset:0,bpm:e.shift().bpm}];return e.forEach((function(t){var e=r[0].bpm,n=4*(t.offset-r[0].offset)/e*60,o=r[0].time+n;"bpm"in t?r.unshift({time:o,offset:t.offset,bpm:t.bpm}):(r.unshift({time:o,offset:t.offset,bpm:0}),r.unshift({time:o+t.stop,offset:t.offset,bpm:e}))})),r.reverse()}(t);return function(t){var r;for(r=d.current;e[r+1]&&e[r+1].time<t;r++);return d.current=r,(t-e[r].time)*e[r].bpm/60/4+e[r].offset}}),[t,d]),p=c.a.useCallback((function(){t&&(e.current=(new Date).getTime(),d.current=0,i.current=0,u(!0))}),[t,e,d,i,u]),h=c.a.useCallback((function(){u(!1)}),[u]);c.a.useEffect((function(){h()}),[t,h]);var b=c.a.useCallback((function(){f&&l&&e.current&&(i.current=l(((new Date).getTime()-e.current)/1e3))}),[f,l,e,i]);return Object(s.a)(b),[i,f,p,h]}},a3WO:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return n}))},dWXJ:function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return f})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return l}));var n=r("o0o1"),o=r.n(n),c=r("ODXe"),a=r("HaE+"),s=null,f={tick:null,stop:null,bpm:null,shock:null,beat:null},u={normal:null,suppressed:null},i=[["normal",1],["suppressed",.25]],d=[["tick","/stepcharts/cursor12.mp3"],["stop","/stepcharts/cursor4.mp3"],["bpm","/stepcharts/cancel1.mp3"],["shock","/stepcharts/cursor7.mp3"],["beat","/stepcharts/cursor6.mp3"]],l=function(){var t=Object(a.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=6;break}return e=new AudioContext,s=e,i.forEach((function(t){var r=Object(c.a)(t,2),n=r[0],o=r[1],a=new GainNode(e);a.gain.value=o,a.connect(e.destination),u[n]=a})),t.next=6,Promise.all(d.map(function(){var t=Object(a.a)(o.a.mark((function t(r){var n,a,s,u,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(c.a)(r,2),a=n[0],s=n[1],t.next=3,fetch(s);case 3:return u=t.sent,t.next=6,u.arrayBuffer();case 6:return i=t.sent,t.next=9,e.decodeAudioData(i);case 9:f[a]=t.sent;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},kelf:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("q1tI"),o=r.n(n),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=o.a.useRef();o.a.useEffect((function(){return e.current=requestAnimationFrame((function r(){e.current=requestAnimationFrame(r),t()})),function(){e.current&&cancelAnimationFrame(e.current)}}),[t])}},pEhc:function(t,e,r){"use strict";var n=r("q1tI"),o=r.n(n),c=r("dWXJ"),a=r("kelf"),s=function(t,e){if(c.b&&t&&e){var r=new AudioBufferSourceNode(c.b);return r.buffer=e,r.connect(t),r.start(),!0}return!1};e.a=function(t){var e=t.chart,r=t.offsetRef,n=o.a.useMemo((function(){return Math.floor(e.arrows[e.arrows.length-1].offset)+1}),[e]),f=o.a.useRef(0),u=o.a.useCallback((function(){f.current<r.current&&r.current<=n&&s(c.c.suppressed,c.a.beat)&&(f.current=r.current-r.current%.25+.25)}),[r,n,f]),i=o.a.useRef(0),d=o.a.useCallback((function(){if(e.arrows[i.current]&&e.arrows[i.current].offset<=r.current){if(e.arrows[i.current].direction.match(/M/))s(c.c.suppressed,c.a.shock);else{var t=e.arrows[i.current].direction.match(/[12].*[12]/);s(c.c.normal,c.a.tick),t&&s(c.c.normal,c.a.tick)}for(;e.arrows[i.current]&&e.arrows[i.current].offset<=r.current;)i.current++}}),[r,i,e]),l=o.a.useRef(0),p=o.a.useCallback((function(){if(e.stops[l.current]&&e.stops[l.current].offset<=r.current)for(s(c.c.suppressed,c.a.stop);e.stops[l.current]&&e.stops[l.current].offset<=r.current;)l.current++}),[r,l]),h=o.a.useRef(0),b=o.a.useCallback((function(){r.current<h.current&&(f.current=r.current-r.current%.25,i.current=e.arrows.findIndex((function(t){return r.current<t.offset})),l.current=e.stops.findIndex((function(t){return r.current<t.offset}))),h.current=r.current}),[r,h,e]),v=o.a.useCallback((function(){b(),u(),d(),p()}),[b,u,d,p]);return Object(a.a)(v),null}},vnkr:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[mix]/[title]/[type]",function(){return r("N+kb")}])}},[["vnkr",0,2,1]]]);