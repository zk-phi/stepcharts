_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{BsWD:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("a3WO");function c(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},"HaE+":function(e,t,n){"use strict";function r(e,t,n,r,c,a,o){try{var i=e[a](o),u=i.value}catch(f){return void n(f)}i.done?t(u):Promise.resolve(u).then(r,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,a){var o=e.apply(t,n);function i(e){r(o,c,a,i,u,"next",e)}function u(e){r(o,c,a,i,u,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return c}))},JePm:function(e,t,n){"use strict";var r=n("q1tI"),c=n.n(r),a=n("dWXJ"),o=n("kelf"),i=function(e,t){if(a.b&&e&&t){var n=new AudioBufferSourceNode(a.b);return n.buffer=t,n.connect(e),n.start(),!0}return!1};t.a=function(e){var t=e.chart,n=e.offsetRef,r=e.timeRef,u=e.enableBeatTick,f=c.a.useRef(0),s=c.a.useCallback((function(){u&&f.current<n.current&&i(a.c.suppressed,a.a.beat)&&(f.current=n.current-n.current%.25+.25)}),[u,n,f]),l=c.a.useRef(0),d=c.a.useCallback((function(){if(t.arrowTimeline[l.current]&&t.arrowTimeline[l.current].time<=r.current){if(t.arrowTimeline[l.current].direction.match(/M/))i(a.c.suppressed,a.a.shock);else{var e=t.arrowTimeline[l.current].direction.match(/[12].*[12]/);i(a.c.normal,a.a.tick),e&&i(a.c.normal,a.a.tick)}for(;t.arrowTimeline[l.current]&&t.arrowTimeline[l.current].time<=r.current;)l.current++}}),[r,l,t]),p=c.a.useRef(t.bpmTimeline.findIndex((function(e){return n.current<e.offset&&0===e.bpm}))),m=c.a.useCallback((function(){if(t.bpmTimeline[p.current]&&t.bpmTimeline[p.current].offset<=n.current)for(i(a.c.suppressed,a.a.stop);t.bpmTimeline[p.current]&&(0!==t.bpmTimeline[p.current].bpm||t.bpmTimeline[p.current].offset<=n.current);)p.current++}),[n,p]),h=c.a.useRef(0),b=c.a.useCallback((function(){n.current<h.current&&(f.current=n.current-n.current%.25,l.current=t.arrowTimeline.findIndex((function(e){return n.current<e.offset})),f.current=t.bpmTimeline.findIndex((function(e){return n.current<e.offset&&0===e.bpm}))),h.current=n.current}),[n,h,t]);return Object(o.a)((function(){b(),s(),d(),m()}),[b,s,d,m]),null}},KQm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("a3WO");var c=n("BsWD");function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"N+kb":function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSG",(function(){return x}));var r=n("q1tI"),c=n.n(r),a=n("o0o1"),o=n.n(a),i=n("HaE+"),u=n("ODXe"),f=n("KQm4"),s=n("kelf"),l=["OFF","LEFT","RIGHT","MIRROR","SHUFFLE1 (\u2192\u2191)","SHUFFLE2 (\u2193\u2190)","SHUFFLE3 (\u2191\u2190)","SHUFFLE4 (\u2192\u2191)","SHUFFLE5 (\u2191\u2193)","SHUFFLE6 (\u2192\u2190)","SHUFFLE1+LEFT","SHUFFLE2+LEFT","SHUFFLE3+LEFT","SHUFFLE4+LEFT","SHUFFLE5+LEFT","SHUFFLE1+RIGHT","SHUFFLE2+RIGHT","SHUFFLE3+RIGHT","SHUFFLE4+RIGHT","SHUFFLE5+RIGHT","SHUFFLE1+MIRROR","SHUFFLE2+MIRROR","SHUFFLE3+MIRROR","SHUFFLE4+MIRROR"],d={OFF:[0,1,2,3],LEFT:[2,0,3,1],RIGHT:[1,3,0,2],MIRROR:[3,2,1,0],"SHUFFLE1 (\u2192\u2191)":[0,1,3,2],"SHUFFLE2 (\u2193\u2190)":[1,0,2,3],"SHUFFLE3 (\u2191\u2190)":[2,1,0,3],"SHUFFLE4 (\u2192\u2191)":[0,3,2,1],"SHUFFLE5 (\u2191\u2193)":[0,2,1,3],"SHUFFLE6 (\u2192\u2190)":[3,1,2,0],"SHUFFLE1+LEFT":[3,0,2,1],"SHUFFLE2+LEFT":[2,1,3,0],"SHUFFLE3+LEFT":[0,2,3,1],"SHUFFLE4+LEFT":[2,0,1,3],"SHUFFLE5+LEFT":[1,0,3,2],"SHUFFLE1+RIGHT":[1,2,0,3],"SHUFFLE2+RIGHT":[0,3,1,2],"SHUFFLE3+RIGHT":[1,3,2,0],"SHUFFLE4+RIGHT":[3,1,0,2],"SHUFFLE5+RIGHT":[2,3,0,1],"SHUFFLE1+MIRROR":[2,3,1,0],"SHUFFLE2+MIRROR":[3,2,0,1],"SHUFFLE3+MIRROR":[3,0,1,2],"SHUFFLE4+MIRROR":[1,2,3,0]},p=c.a.createElement,m=13.5,h=16.875,b={4:"/stepcharts/arrow4.svg",6:"/stepcharts/arrow6.svg",8:"/stepcharts/arrow8.svg",12:"/stepcharts/arrow6.svg",16:"/stepcharts/arrow16.svg",shock:"/stepcharts/arrowShock.svg",freeze:"/stepcharts/arrowFreeze.svg"},v={0:"-90deg",1:"180deg",2:"0",3:"90deg"},F=function(e,t){return 4*e*13.3*t+h},k=function(e){var t=e.offset,n=e.speed,r={position:"absolute",top:"".concat(F(t,n),"vh"),width:1,height:1};return p("div",{style:r})},y=function(e){var t=e.beat,n=e.direction,r=e.offset,c=e.speed,a={position:"absolute",top:"".concat(F(r,c)-6.75,"vh"),left:"".concat(n*m,"vh"),height:"".concat(m,"vh"),width:"".concat(m,"vh"),background:"url(".concat(b[t],")"),backgroundSize:"cover",transform:"rotate(".concat(v[n],")")};return p("div",{style:a})},E=function(e){var t=e.direction,n=e.offset,r=e.endOffset,a=e.speed,o={position:"absolute",top:"".concat(F(n,a),"vh"),left:"".concat(t*m+.675,"vh"),height:"".concat(4*(r-n)*a*13.3,"vh"),width:"".concat(12.15,"vh"),backgroundColor:"#5e5"},i={position:"absolute",top:"".concat(F(r,a),"vh"),left:"".concat(t*m+.675,"vh"),height:0,width:"".concat(12.15,"vh"),borderTop:"".concat(6.075,"vh solid #3b3"),borderLeft:"".concat(6.075,"vh solid transparent"),borderRight:"".concat(6.075,"vh solid transparent")};return p(c.a.Fragment,null,p("div",{style:o}),p("div",{style:i}))},w=function(e){var t=e.offset,n=e.speed,r=e.color,c={position:"absolute",height:0,width:"".concat(54,"vh"),left:0,top:"".concat(F(t,n),"vh"),border:"2px solid ".concat(r)};return p("div",{style:c})},R=function(){var e={position:"absolute",height:0,width:"".concat(54,"vh"),left:0,top:"".concat(10.125,"vh"),border:"".concat(6.75,"vh solid #ffffff60")};return p("div",{style:e})},S=function(e){var t=e.chart,n=e.speed,r=void 0===n?1:n,a=e.turn,o=void 0===a?"OFF":a,i=e.showBeat,u=Math.floor(t.arrowTimeline[t.arrowTimeline.length-1].offset),s=Object(f.a)(t.arrowTimeline).reverse(),l=Object(f.a)(t.freezes).reverse();return p(c.a.Fragment,null,i&&Object(f.a)(Array(4*(u+1))).map((function(e,t){return p(w,{key:"b".concat(t),offset:t/4,speed:r,color:t%4===0?"#888":"#444"})})),t.bpmTimeline.map((function(e,t,n){return 0===t?null:0===e.bpm?p(w,{key:"ts".concat(t),offset:e.offset,speed:r,color:"#4f4"}):0===n[t-1].bpm?null:n[t-1].bpm<e.bpm?p(w,{key:"ts".concat(t),offset:e.offset,speed:r,color:"#fc4"}):p(w,{key:"ts".concat(t),offset:e.offset,speed:r,color:"#4cf"})})),l.map((function(e,t){return p(E,{key:"f".concat(t),direction:d[o][e.direction],offset:e.startOffset,endOffset:e.endOffset,speed:r})})),s.map((function(e,t){var n=e.direction.match(/2/)?"freeze":e.beat;return p(c.a.Fragment,null,e.direction.match(/^1.../)&&p(y,{key:"a".concat(t,"l"),beat:n,direction:d[o][0],offset:e.offset,speed:r}),e.direction.match(/^.1../)&&p(y,{key:"a".concat(t,"d"),beat:n,direction:d[o][1],offset:e.offset,speed:r}),e.direction.match(/^..1./)&&p(y,{key:"a".concat(t,"u"),beat:n,direction:d[o][2],offset:e.offset,speed:r}),e.direction.match(/^...1/)&&p(y,{key:"a".concat(t,"r"),beat:n,direction:d[o][3],offset:e.offset,speed:r}),e.direction.match(/^2.../)&&p(y,{key:"a".concat(t,"l"),beat:"freeze",direction:d[o][0],offset:e.offset,speed:r}),e.direction.match(/^.2../)&&p(y,{key:"a".concat(t,"d"),beat:"freeze",direction:d[o][1],offset:e.offset,speed:r}),e.direction.match(/^..2./)&&p(y,{key:"a".concat(t,"u"),beat:"freeze",direction:d[o][2],offset:e.offset,speed:r}),e.direction.match(/^...2/)&&p(y,{key:"a".concat(t,"r"),beat:"freeze",direction:d[o][3],offset:e.offset,speed:r}),e.direction.match(/^M.../)&&p(y,{key:"a".concat(t,"l"),beat:"shock",direction:d[o][0],offset:e.offset,speed:r}),e.direction.match(/^.M../)&&p(y,{key:"a".concat(t,"d"),beat:"shock",direction:d[o][1],offset:e.offset,speed:r}),e.direction.match(/^..M./)&&p(y,{key:"a".concat(t,"u"),beat:"shock",direction:d[o][2],offset:e.offset,speed:r}),e.direction.match(/^...M/)&&p(y,{key:"a".concat(t,"r"),beat:"shock",direction:d[o][3],offset:e.offset,speed:r}))})),p(k,{offset:u+2,speed:r}))},T=c.a.memo(S),H=function(e){var t=e.offsetRef,n=e.speed,r=void 0===n?1:n,a=e.playing,o=e.children,i=c.a.useRef(null),u={position:"relative",width:"".concat(54,"vh"),height:"100vh",backgroundColor:"black",overflow:"scroll"},f=c.a.useMemo((function(){if(i.current&&a){var e=i.current.getBoundingClientRect();return e.bottom-e.top}return 0}),[i,a]),l=c.a.useRef();return Object(s.a)((function(){i.current&&t.current&&t.current!=l.current&&(i.current.scrollTop=(F(t.current,r)-h)*f/100,l.current=t.current)}),[i,t,l,r,f]),p("div",{ref:i,style:u},o)},O=function(e){var t=e.chart,n=e.speed,r=void 0===n?1:n,c=e.turn,a=void 0===c?"OFF":c,o=e.offsetRef,i=e.playing,u=e.showBeat;return p("div",{style:{position:"relative"}},p(H,{offsetRef:o,speed:r,playing:i},p(T,{chart:t,speed:r,turn:a,showBeat:u})),p(R,null))},L=n("JePm"),g=n("Zd8l"),U=n("dWXJ"),I=c.a.createElement,j=function(e){var t=e.chart,n=Object(g.a)(t),r=Object(u.a)(n,5),a=r[0],f=r[1],s=r[2],d=r[3],p=r[4],m=c.a.useState((function(){return Math.floor(620/t.meta.mainBpm*4)/4})),h=Object(u.a)(m,2),b=h[0],v=h[1],F=c.a.useState((function(){return t.arrowTimeline.reduce((function(e,t){return e+(4===t.beat?1:0)}),0)>=t.arrowTimeline.length/4})),k=Object(u.a)(F,2),y=k[0],E=k[1],w=c.a.useState("OFF"),R=Object(u.a)(w,2),S=R[0],T=R[1],H=c.a.useState(!1),j=Object(u.a)(H,2),C=j[0],x=j[1],M=c.a.useCallback((function(e){return v(Number(e.target.value))}),[v]),B=c.a.useCallback((function(e){return T(e.target.value)}),[T]),A=c.a.useCallback((function(e){return E(e.target.checked)}),[E]),_=c.a.useCallback((function(){return x(!1)}),[x]),G=c.a.useCallback((function(){return x(!0)}),[x]),N=c.a.useCallback(Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)();case 2:d(),x(!1);case 4:case"end":return e.stop()}}),e)}))),[d]),D=c.a.useCallback((function(){p(),x(!1)}),[p]);return I("div",{style:{display:"flex"}},I(O,{chart:t,speed:b,offsetRef:a,playing:s,turn:S,showBeat:y}),I(L.a,{chart:t,offsetRef:a,timeRef:f,enableBeatTick:y}),C&&I("div",{style:{position:"absolute",padding:16,width:"100vw",height:"100vh",background:"#ffffff80"}},I("div",null,"Speed:"," ",I("input",{type:"range",min:"0.25",max:"8",step:"0.25",value:b,onInput:M}),"x",b," (",t.meta.minBpm!==t.meta.mainBpm?"".concat(t.meta.minBpm*b,"-"):"",t.meta.mainBpm*b,t.meta.mainBpm!==t.meta.maxBpm?"-".concat(t.meta.maxBpm*b):"",")"),I("div",null,"Turn:"," ",I("select",{value:S,onInput:B},l.map((function(e){return I("option",{key:e,value:e},e)})))),I("div",null,"Beat:"," ",I("input",{type:"checkbox",checked:y,onChange:A})),I("button",{onClick:_},"[Close]")," ",s?I("button",{onClick:D},"[STOP]"):I("button",{onClick:N},"[PLAY]")),I("button",{onClick:G},"\u2699\ufe0f"))},C=c.a.createElement,x=!0;t.default=function(e){var t=e.chart;return C(j,{chart:t})}},ODXe:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("BsWD");function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,c=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){c=!0,a=u}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Zd8l:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ODXe"),c=n("q1tI"),a=n.n(c),o=n("kelf"),i=function(e){var t=a.a.useRef(),n=a.a.useState(!1),c=Object(r.a)(n,2),i=c[0],u=c[1],f=a.a.useRef(0),s=a.a.useRef(0),l=a.a.useMemo((function(){return e?Math.floor(e.arrowTimeline[e.arrowTimeline.length-1].offset)+1:0}),[e]),d=a.a.useRef(0),p=a.a.useMemo((function(){if(!e)return null;var t=e.bpmTimeline;return function(e){var n;for(n=d.current;t[n+1]&&t[n+1].time<e;n++);return d.current=n,(e-t[n].time)*t[n].bpm/60/4+t[n].offset}}),[e,d]),m=a.a.useCallback((function(){e&&(t.current=(new Date).getTime(),d.current=0,f.current=0,s.current=0,u(!0))}),[e,t,d,f,s,u]),h=a.a.useCallback((function(){u(!1)}),[u]);return a.a.useEffect((function(){h()}),[e,h]),Object(o.a)((function(){i&&p&&t.current&&(f.current=((new Date).getTime()-t.current)/1e3,s.current=p(f.current),s.current>=l&&h())}),[i,p,t,f,s,h]),[s,f,i,m,h]}},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},dWXJ:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d}));var r=n("o0o1"),c=n.n(r),a=n("ODXe"),o=n("HaE+"),i=null,u={tick:null,stop:null,bpm:null,shock:null,beat:null},f={normal:null,suppressed:null},s=[["normal",1],["suppressed",.25]],l=[["tick","/stepcharts/cursor12.mp3"],["stop","/stepcharts/cursor4.mp3"],["bpm","/stepcharts/cancel1.mp3"],["shock","/stepcharts/cursor7.mp3"],["beat","/stepcharts/cursor6.mp3"]],d=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=6;break}return t=new AudioContext,i=t,s.forEach((function(e){var n=Object(a.a)(e,2),r=n[0],c=n[1],o=new GainNode(t);o.gain.value=c,o.connect(t.destination),f[r]=o})),e.next=6,Promise.all(l.map(function(){var e=Object(o.a)(c.a.mark((function e(n){var r,o,i,f,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(a.a)(n,2),o=r[0],i=r[1],e.next=3,fetch(i);case 3:return f=e.sent,e.next=6,f.arrayBuffer();case 6:return s=e.sent,e.next=9,t.decodeAudioData(s);case 9:u[o]=e.sent;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},kelf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("q1tI"),c=n.n(r),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0,n=c.a.useRef(),r=c.a.useCallback(e,t);c.a.useEffect((function(){return n.current=requestAnimationFrame((function e(){n.current=requestAnimationFrame(e),r()})),function(){n.current&&cancelAnimationFrame(n.current)}}),[r])}},vnkr:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[mix]/[title]/[type]",function(){return n("N+kb")}])}},[["vnkr",0,2,1]]]);